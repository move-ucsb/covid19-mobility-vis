(self.webpackChunkmy_gatsby_site=self.webpackChunkmy_gatsby_site||[]).push([[807],{9713:function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0},6479:function(e,t,n){var r=n(7316);e.exports=function(e,t){if(null==e)return{};var n,a,i=r(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i},e.exports.default=e.exports,e.exports.__esModule=!0},935:function(e,t,n){var r=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt,c="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,s="object"==typeof self&&self&&self.Object===Object&&self,u=c||s||Function("return this")(),d=Object.prototype.toString,p=Math.max,f=Math.min,h=function(){return u.Date.now()};function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==d.call(e)}(e))return NaN;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=i.test(e);return n||o.test(e)?l(e.slice(2),n?2:8):a.test(e)?NaN:+e}e.exports=function(e,t,n){var r,a,i,o,l,c,s=0,u=!1,d=!1,w=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=r,i=a;return r=a=void 0,s=t,o=e.apply(i,n)}function x(e){return s=e,l=setTimeout(v,t),u?y(e):o}function b(e){var n=e-c;return void 0===c||n>=t||n<0||d&&e-s>=i}function v(){var e=h();if(b(e))return k(e);l=setTimeout(v,function(e){var n=t-(e-c);return d?f(n,i-(e-s)):n}(e))}function k(e){return l=void 0,w&&r?y(e):(r=a=void 0,o)}function E(){var e=h(),n=b(e);if(r=arguments,a=this,c=e,n){if(void 0===l)return x(c);if(d)return l=setTimeout(v,t),y(c)}return void 0===l&&(l=setTimeout(v,t)),o}return t=g(t)||0,m(n)&&(u=!!n.leading,i=(d="maxWait"in n)?p(g(n.maxWait)||0,t):i,w="trailing"in n?!!n.trailing:w),E.cancel=function(){void 0!==l&&clearTimeout(l),s=0,r=c=a=l=void 0},E.flush=function(){return void 0===l?o:k(h())},E}},8385:function(e,t,n){var r="Expected a function",a=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt,s="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,u="object"==typeof self&&self&&self.Object===Object&&self,d=s||u||Function("return this")(),p=Object.prototype.toString,f=Math.max,h=Math.min,m=function(){return d.Date.now()};function g(e,t,n){var a,i,o,l,c,s,u=0,d=!1,p=!1,g=!0;if("function"!=typeof e)throw new TypeError(r);function x(t){var n=a,r=i;return a=i=void 0,u=t,l=e.apply(r,n)}function b(e){return u=e,c=setTimeout(k,t),d?x(e):l}function v(e){var n=e-s;return void 0===s||n>=t||n<0||p&&e-u>=o}function k(){var e=m();if(v(e))return E(e);c=setTimeout(k,function(e){var n=t-(e-s);return p?h(n,o-(e-u)):n}(e))}function E(e){return c=void 0,g&&a?x(e):(a=i=void 0,l)}function C(){var e=m(),n=v(e);if(a=arguments,i=this,s=e,n){if(void 0===c)return b(s);if(p)return c=setTimeout(k,t),x(s)}return void 0===c&&(c=setTimeout(k,t)),l}return t=y(t)||0,w(n)&&(d=!!n.leading,o=(p="maxWait"in n)?f(y(n.maxWait)||0,t):o,g="trailing"in n?!!n.trailing:g),C.cancel=function(){void 0!==c&&clearTimeout(c),u=0,a=s=i=c=void 0},C.flush=function(){return void 0===c?l:E(m())},C}function w(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==p.call(e)}(e))return NaN;if(w(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=w(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var n=o.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):i.test(e)?NaN:+e}e.exports=function(e,t,n){var a=!0,i=!0;if("function"!=typeof e)throw new TypeError(r);return w(n)&&(a="leading"in n?!!n.leading:a,i="trailing"in n?!!n.trailing:i),g(e,t,{leading:a,maxWait:t,trailing:i})}},6379:function(e,t,n){"use strict";n.d(t,{Z:function(){return k}});var r=n(7294),a=n(9692),i=n(7154),o=n.n(i),l=n(9713),c=n.n(l),s=n(6479),u=n.n(s),d=n(5264);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){return Object.keys(e).reduce((function(t,n){var r;return r=n,(0,d.Z)(r)&&(t[n]=e[n]),t}),{})}var h=r.forwardRef((function(e,t){var n=e.children,a=e.iconAttrs,i=(e.iconVerticalAlign,e.iconViewBox),l=e.size,s=e.title,d=u()(e,["children","iconAttrs","iconVerticalAlign","iconViewBox","size","title"]),h=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({viewBox:i,height:void 0!==e.height?e.height:l,width:void 0!==e.width?e.width:l,"aria-hidden":null==s?"true":void 0,focusable:"false",role:null!=s?"img":void 0},a),m=f(d);return r.createElement("svg",o()({},h,m,{ref:t}),s&&r.createElement("title",{key:"icon-title"},s),n)})),m=(0,a.ZP)(h).withConfig({displayName:"StyledIconBase",componentId:"ea9ulj-0"})(["display:inline-block;vertical-align:",";overflow:hidden;"],(function(e){return e.iconVerticalAlign})),g=r.forwardRef((function(e,t){return r.createElement(m,o()({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 16 16"},e,{ref:t}),r.createElement("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z"}))}));g.displayName="PlayCircleFill";var w=r.forwardRef((function(e,t){return r.createElement(m,o()({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 16 16"},e,{ref:t}),r.createElement("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z"}))}));w.displayName="PauseCircleFill";var y=r.forwardRef((function(e,t){return r.createElement(m,o()({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},e,{ref:t}),r.createElement("path",{d:"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10c5.515 0 10-4.486 10-10S17.515 2 12 2zm4 14l-6-4v4H8V8h2v4l6-4v8z"}))}));y.displayName="SkipPreviousCircle";var x=r.forwardRef((function(e,t){return r.createElement(m,o()({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},e,{ref:t}),r.createElement("path",{d:"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm4 14h-2v-4l-6 4V8l6 4V8h2v8z"}))}));x.displayName="SkipNextCircle";var b=r.forwardRef((function(e,t){return r.createElement(m,o()({iconAttrs:{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},e,{ref:t}),r.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),r.createElement("path",{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm4.82-4.924a7 7 0 10-1.852 1.266l-.975-1.755A5 5 0 1117 12h-3l2.82 5.076z"}))}));b.displayName="Restart";var v=a.ZP.div.withConfig({displayName:"controls__ButtonArea",componentId:"dd8waq-0"})(["display:flex;width:100%;justify-content:center;*{margin:5px 10px;}& > *:hover{cursor:pointer;}"]),k=function(e){var t=e.week,n=e.setWeek,a=e.playing,i=e.setPlaying,o=e.max,l=e.min,c=void 0===l?0:l;return r.createElement(v,null,r.createElement(y,{size:"30px",onClick:function(){t>c&&n(t-1),i(!1)}}),t===o?r.createElement(b,{size:"30px",onClick:function(){n(c),i(!1)}}):a?r.createElement(w,{size:"30px",onClick:function(){i(!1)}}):r.createElement(g,{size:"30px",onClick:function(){i(!0)}}),r.createElement(x,{size:"30px",onClick:function(){t<o&&n(t+1),i(!1)}}))}},719:function(e,t,n){"use strict";n.d(t,{E:function(){return o},o:function(){return l}});var r=n(7294),a=n(7576),i=n(5743),o=(0,r.createContext)(null),l=function(e){var t=e.children,n=a.zL(i,i.objects.states).features,l=a.zL(i,i.objects.counties).features;return r.createElement(o.Provider,{value:{states:n,counties:l}},t)}},853:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Pe}});var r=n(7294),a=(n(935),n(8385),Object.create(null));a.enableHighAccuracy=!1,a.timeout=4294967295,a.maximumAge=0;Object.freeze(a);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(c){a=!0,i=c}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c="object"===("undefined"==typeof window?"undefined":i(window)),s=function(e){return"undefined"!=typeof window&&e in window},u=function(e){if(!c||!s("matchMedia"))return console.warn("matchMedia is not supported, this could happen both because window.matchMedia is not supported by your current browser or you're using the useMediaQuery hook whilst server side rendering."),null;var t=o((0,r.useState)(!!window.matchMedia(e).matches),2),n=t[0],a=t[1];return(0,r.useEffect)((function(){var t=window.matchMedia(e),n=function(){return a(!!t.matches)};return t.addListener(n),n(),function(){t.removeListener(n)}}),[e]),n},d=function(e){try{return JSON.parse(e)}catch(t){return null}},p="undefined"!=typeof process&&{}&&!1,f=function(e){var t="".concat(e,"Storage");return c&&!s(t)&&console.warn("".concat(t," is not supported")),function(e,n){if(!c)return p&&console.warn("Please be aware that ".concat(t," could not be available during SSR")),[JSON.stringify(n),function(){}];var a=window[t],i=o((0,r.useState)(d(a.getItem(e)||JSON.stringify(n))),2),l=i[0],s=i[1];return(0,r.useEffect)((function(){a.setItem(e,JSON.stringify(l))}),[e,l]),[l,s]}},h=(f("local"),f("session"),n(9692)),m=n(5444),g=n(2114),w=n(9088),y=n(719),x=n(1839),b=n(8928),v=n(5743),k=h.ZP.div.withConfig({displayName:"map2__Container",componentId:"sc-8v8ba5-0"})(["display:flex;flex-wrap:wrap;flex-direction:column;align-items:center;margin:10px 20px;@media (max-width:830px){margin:10px 5px;}@media (max-width:700px){margin:0;}"]),E=h.ZP.h3.withConfig({displayName:"map2__Title",componentId:"sc-8v8ba5-1"})(["margin:0;"]),C=h.ZP.svg.withConfig({displayName:"map2__MapContainer",componentId:"sc-8v8ba5-2"})(["g{background-color:light-gray;}border:1px solid ",";"],(function(e){return e.border?"black":"white"})),S=function(e){return Number(String(e).slice(0,-3))},N=function(e){var t=e.title,n=(e.highlightedCounty,e.countySelector,e.data),a=(e.time,e.MapSettings),i=e.weekNum,o=e.past,l=e.addState,c=e.stateSelector,s=e.selectedState,u=e.children,d=a.scale,p=a.translate,f=a.width,h=a.height,m=(0,r.useRef)(null),g=(0,r.useContext)(y.E),w=g.counties,N=g.states;return(0,r.useEffect)((function(){var e=x.FWi().scale(d).translate(p),t=x.l49().projection(e),n=x.Ys(m.current).attr("width",f).attr("height",h).append("g");l(new b.Z(t,n,f,h,s[0])),n.append("g").style("stroke","black").style("stroke-width","0.5px").style("fill","#ffffffff").selectAll("path").data(N).enter().append("path").attr("d",t).attr("stateFips",(function(e){var t=e.id;return Number(t)})),n.append("g").selectAll("path").data(w).enter().append("path").attr("d",t).attr("stateName",(function(e){var t=e.id;return v.objects.states.geometries.find((function(e){return S(t)===Number(e.id)})).properties.name})).attr("id",(function(e){var t=e.id;return"c"+Number(t)})).attr("class","cboundary").style("fill","#00000000")}),[]),(0,r.useEffect)((function(){n.forEach((function(e){var t=e.getLast(i),n=t.curr,r=t.last,a=t.weeks,l="#00000000",c=1;o||0===n?o&&(l=0!==n&&1===n||1===r?"#fa5a50":"#5768ac",c=n?1:(i-a+1)/(i+1)*Number(-1!==r)):l=1===n?"#fa5a50":"#5768ac",c*=Math.pow(1/4,1-Number(S(e.fips)===s[0]||-1===s[0])),x.Ys(m.current).select("#c"+e.fips).style("fill",l).style("fill-opacity",c)}))}),[i,o,s]),(0,r.useEffect)((function(){x.Ys(m.current).selectAll(".cboundary").on("click",(function(e,t){var n=e.currentTarget,r=t.id;c([S(r),n.getAttribute("stateName")])}))}),[s]),r.createElement(k,null,r.createElement(E,null,t),r.createElement(C,{ref:m,border:-1!==s[0]}),u)},_=n(6379),P=n(7329),j=n(9159),I=h.ZP.svg.withConfig({displayName:"slider__SliderBar",componentId:"sc-1beslx3-0"})(["width:760px;height:100px;"]),A=function(e){var t=e.split("-"),n=t[0],r=t[1],a=t[2];return new Date(+n,r-1,+a)},O=function(e,t){return new Date(e.getTime()+864e5*t)},Z=function(e){var t=e.week,n=e.setWeek,a=e.setPlaying,i=e.showWeekNumber,o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],l=(0,r.useRef)(null),c=(0,r.useContext)(j.W).map((function(e){return A(e)})),s=(0,P.Z)(Array(365).keys()).map((function(e){return{d:O(c[0],e),i:e}})).filter((function(e){return 1===e.d.getDate()})),u=x.Xf().domain([c[0],c[c.length-1]]).range([0,600]).clamp(!0),d=function(e){var t;e instanceof Date?(t=(0,P.Z)(Array(c.length).keys()).find((function(t){return c[t]>e||t===c.length-1||c[t]>=e&&0===t})),n(t)):t=e;var r=c[t],a=t+1<c.length?O(c[t+1],-1):A("2020-12-27");x.Ys(l.current).select("#handle").attr("cx",u(r)),x.Ys(l.current).select("#label").attr("x",u(r)).text(r.getMonth()+1+"/"+r.getDate()+" - "+(a.getMonth()+1)+"/"+a.getDate())};return(0,r.useEffect)((function(){var e=x.Ys(l.current).append("svg").attr("width",760).attr("height",100).append("g").attr("transform","translate(80, 50)").attr("id","slider");e.insert("g").selectAll("text").data(s).enter().append("text").attr("x",(function(e){var t=e.d;return u(t)})).attr("y",30).attr("text-anchor","middle").text((function(e){var t=e.d;return o[t.getMonth()]})),e.append("text").attr("x",u(u.invert(600))).attr("y",30).text("2020"),e.append("text").attr("id","weekLabel").attr("x",-75).attr("y",0).text("Week"),e.append("text").attr("x",-55).attr("y",15).attr("id","weekCounter").text("0/52").attr("text-anchor","middle");e.insert("circle").attr("id","handle").attr("r",9),e.append("text").attr("id","label").attr("text-anchor","middle").attr("transform","translate(0,-20)");e.append("line").attr("stroke","black").attr("stroke-width","10px").attr("stroke-opacity",.3).attr("stroke-linecap","round").attr("x1",u.range()[0]).attr("x2",u.range()[1]).call(x.ohM().on("start.interrupt",(function(){return e.interrupt()})).on("start drag",(function(e){a(!1),d(u.invert(e.x))}))).style("cursor","pointer")}),[]),(0,r.useEffect)((function(){d(t),x.Ys(l.current).select("#weekCounter").text(t+1+"/52")}),[t]),(0,r.useEffect)((function(){x.Ys(l.current).select("#weekCounter").style("fill-opacity",i?1:0),x.Ys(l.current).select("#weekLabel").style("fill-opacity",i?1:0)}),[i]),r.createElement(I,{ref:l})},M=h.ZP.svg.withConfig({displayName:"sliderWithEvents__Slider",componentId:"sc-19upptj-0"})(["width:760px;height:150px;"]),T=function(e){var t=e.split("-"),n=t[0],r=t[1],a=t[2];return new Date(+n,r-1,+a)},W=function(e,t){return new Date(e.getTime()+864e5*t)},D=function(e){var t=e.week,n=e.setWeek,a=e.setPlaying,i=e.events,o=e.showWeekNumber,l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],c=(0,r.useContext)(j.W).map((function(e){return T(e)})),s=(0,P.Z)(Array(365).keys()).map((function(e){return{d:W(c[0],e),i:e}})).filter((function(e){return 1===e.d.getDate()})),u=(0,r.useRef)(null),d=x.Xf().domain([c[0],c[c.length-1]]).range([0,600]).clamp(!0),p=function(e){var t;e instanceof Date?(t=(0,P.Z)(Array(c.length).keys()).find((function(t){return c[t]>e||t===c.length-1||c[t]>=e&&0===t})),n(t)):t=e;var r=c[t],a=t+1<c.length?W(c[t+1],-1):T("2020-12-27");x.Ys(u.current).select("#handle").attr("cx",d(r)),x.Ys(u.current).select("#label").attr("x",d(r)).text(r.getMonth()+1+"/"+r.getDate()+" - "+(a.getMonth()+1)+"/"+a.getDate())};return(0,r.useEffect)((function(){var e=x.Ys(u.current).append("svg").attr("width",760).attr("height",150).append("g").attr("transform","translate(80, 100)").attr("id","slider");e.insert("g").selectAll("text").data(s).enter().append("text").attr("x",(function(e){var t=e.d;return d(t)})).attr("y",30).attr("text-anchor","middle").text((function(e){var t=e.d;return l[t.getMonth()]})),e.append("g").attr("id","eventTitles"),e.append("g").attr("id","eventConnectors"),e.append("text").attr("x",d(d.invert(600))).attr("y",30).text("2020"),e.append("text").attr("id","weekLabel").attr("x",-75).attr("y",0).text("Week"),e.append("text").attr("x",-55).attr("y",15).attr("id","weekCounter").text("0/52").attr("text-anchor","middle");e.insert("circle").attr("id","handle").attr("r",9),e.append("text").attr("id","label").attr("text-anchor","middle").attr("transform","translate(0,-20)"),e.append("rect").attr("id","labelBackground");e.append("line").attr("stroke","black").attr("stroke-width","10px").attr("stroke-opacity",.3).attr("stroke-linecap","round").attr("x1",d.range()[0]).attr("x2",d.range()[1]).select((function(){return this.parentNode.appendChild(this.cloneNode(!0))})).attr("stroke-width","100px").attr("stroke","transparent").call(x.ohM().on("start.interrupt",(function(){return e.interrupt()})).on("start drag",(function(e){a(!1),p(d.invert(e.x))})))}),[]),(0,r.useEffect)((function(){x.Ys(u.current).select("#eventTitles").selectAll("text").remove(),x.Ys(u.current).select("#eventConnectors").selectAll("line").remove(),i.forEach((function(e){var n=e.date,r=e.lab;x.Ys(u.current).select("#eventTitles").append("text").attr("fill-opacity",T(n)<c[t]?1:.2).attr("x",d(T(n))).attr("y",-50).attr("text-anchor","middle").text(r),x.Ys(u.current).select("#eventConnectors").append("line").attr("stroke","black").attr("stroke-width","1px").attr("stroke-opacity",T(n)<c[t]?W(T(n),21)<c[t]?1:.3:.2).attr("x1",d(T(n))).attr("x2",d(T(n))).attr("y1",-15).attr("y2",-40)}))}),[t]),(0,r.useEffect)((function(){p(t),x.Ys(u.current).select("#weekCounter").text(t+1+"/52")}),[t]),(0,r.useEffect)((function(){x.Ys(u.current).select("#weekCounter").style("fill-opacity",o?1:0),x.Ys(u.current).select("#weekLabel").style("fill-opacity",o?1:0)}),[o]),r.createElement(M,{ref:u})},V=h.ZP.div.withConfig({displayName:"mobileDisplay__TextArea",componentId:"g1084l-0"})(["display:flex;width:100%;flex-direction:column;align-items:center;margin:5px 0;"]),L=h.ZP.p.withConfig({displayName:"mobileDisplay__Text",componentId:"g1084l-1"})(["margin:5px 0;"]),Y=function(e){var t=e.split("-"),n=t[0],r=t[1],a=t[2];return new Date(+n,+r-1,+a)};function z(e){var t,n,a=e.week,i=e.showWeekNumber,o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],l=(0,r.useContext)(j.W).map((function(e){return Y(e)})),c=l[a],s=a+1<l.length?(t=l[a+1],n=-1,new Date(t.getTime()+864e5*n)):Y("2020-12-27");return r.createElement(V,null,i?r.createElement(L,null,"Week ",a+1,"/52"):null,null!==c?r.createElement(L,null,o[c.getMonth()]," ",c.getDate()," -"," ",o[s.getMonth()]," ",s.getDate()," "):null)}var F=h.ZP.div.withConfig({displayName:"timeline__Container",componentId:"sc-188udpi-0"})(["width:",";height:","px;"],(function(e){return e.width}),(function(e){return e.height})),R=function(e){var t=e.week,n=e.setWeek,a=e.playing,i=e.setPlaying,o=e.showWeekNumber,l=e.showEvents,c=e.mobileMode,s=[{date:"2020-03-13",lab:"National Emergency"},{date:"2020-05-28",lab:"100k Deaths"}];return r.createElement(F,{width:c?"100%":"760px",height:c?115:l?200:150},c?r.createElement(z,{week:t,showWeekNumber:o}):l?r.createElement(D,{week:t,setWeek:n,setPlaying:i,showWeekNumber:o,events:s}):r.createElement(Z,{week:t,setWeek:n,setPlaying:i,showWeekNumber:o,events:s}),r.createElement(_.Z,{max:51,week:t,setWeek:n,playing:a,setPlaying:i}))},B=h.ZP.div.withConfig({displayName:"timelinelegend__Container",componentId:"sc-6spnt5-0"})(["display:flex;width:100%;justify-content:flex-end;"]);function H(e){e.week;var t=(0,r.useRef)(null),n=60,a=[20,20];return(0,r.useEffect)((function(){x.Ys(t.current).selectAll("*").remove();var e=x.Ys(t.current).style("width",370).style("height",75).append("g").attr("transform","translate("+(30+a[0])+",0)"),r=x.BYU().domain([1,52]).range([0,370-2*a[0]-30]),i=x.BYU().domain([0,2]).range([n-a[1],0]),o=(0,P.Z)(Array(208).keys()).map((function(e){return{w:e/4,c:e%2}}));e.append("g").attr("transform","translate(0,"+(a[1]+25)+")").call(x.LLu(r).ticks(5)).style("display","none"),e.append("g").attr("transform","translate(0,0)").call(x.y4O(i)).style("display","none"),e.selectAll("rect").remove().data(o).enter().append("rect").attr("class","point").attr("x",(function(e){var t=e.w;return r(t)})).attr("y",(function(e){var t=e.c;return i(t)-5})).attr("width",3).attr("height",15).attr("stroke","none").attr("fill",(function(e){return 1===e.c?"#fa5a50":"#5768ac"})).attr("fill-opacity",(function(e){return e.w/52})),e.append("text").attr("text-anchor","middle").attr("x",r(1)).attr("y",n+a[1]/2).text("Past"),e.append("text").attr("text-anchor","middle").attr("x",r(50)).attr("y",n+a[1]/2).text("Recent"),e.append("text").attr("text-anchor","end").attr("x",-15).attr("y",20+a[1]/4).text("Hot"),e.append("text").attr("text-anchor","end").attr("x",-15).attr("y",40+a[1]/4).text("Cold")}),[]),r.createElement(B,null,r.createElement("svg",{ref:t}))}var J=h.ZP.div.withConfig({displayName:"mapView2__ControlArea",componentId:"sc-1n3pnkf-0"})(["display:flex;width:100%;justify-content:space-between;flex-wrap:wrap;"]),$=h.ZP.div.withConfig({displayName:"mapView2__ControlsContainer",componentId:"sc-1n3pnkf-1"})(["display:flex;flex-direction:column;align-items:center;margin:0 15px;@media (max-width:860px){justify-content:center;width:100%;}"]),q=h.ZP.p.withConfig({displayName:"mapView2__ColdLegend",componentId:"sc-1n3pnkf-2"})(["background-color:#5768acaa;"]),U=h.ZP.p.withConfig({displayName:"mapView2__HotLegend",componentId:"sc-1n3pnkf-3"})(["background-color:#fa5a50aa;"]),G=h.ZP.div.withConfig({displayName:"mapView2__Legend",componentId:"sc-1n3pnkf-4"})(["display:flex;align-items:center;justify-content:center;& > *{margin:5px;padding:5px;}"]),X=h.ZP.div.withConfig({displayName:"mapView2__LegendContainer",componentId:"sc-1n3pnkf-5"})(["width:100%;display:flex;justify-content:flex-end;@media (max-width:762px){justify-content:center;}"]),Q=h.ZP.div.withConfig({displayName:"mapView2__Container",componentId:"sc-1n3pnkf-6"})(["display:flex;flex-direction:column;align-items:center;"]),K=h.ZP.div.withConfig({displayName:"mapView2__TextContainer",componentId:"sc-1n3pnkf-7"})(["display:flex;flex-direction:column;justify-content:flex-start;max-width:650px;& > h1{margin:5px 15px 0 15px;}"]),ee=h.ZP.p.withConfig({displayName:"mapView2__Text",componentId:"sc-1n3pnkf-8"})(["margin:5px 15px;"]),te=h.ZP.hr.withConfig({displayName:"mapView2__Divider",componentId:"sc-1n3pnkf-9"})(["width:98%;height:1px;background-color:black;border-radius:1px;margin:5px 10px;"]),ne=h.ZP.div.withConfig({displayName:"mapView2__MapContainer",componentId:"sc-1n3pnkf-10"})(["display:flex;flex-direction:row;justify-content:center;width:100%;flex-wrap:wrap;@media (max-width:770px){flex-wrap:wrap;}"]),re=h.ZP.button.withConfig({displayName:"mapView2__Button",componentId:"sc-1n3pnkf-11"})(["border-radius:10px;height:30px;width:60px;cursor:pointer;"]),ae=h.ZP.div.withConfig({displayName:"mapView2__CheckBox",componentId:"sc-1n3pnkf-12"})(["display:flex;flex-direction:row;flex-wrap:nowrap;width:180px;"]),ie=h.ZP.div.withConfig({displayName:"mapView2__Row",componentId:"sc-1n3pnkf-13"})(["margin:0 3px;input{cursor:pointer;}"]),oe=h.ZP.h3.withConfig({displayName:"mapView2__Title",componentId:"sc-1n3pnkf-14"})(["margin:3px 15px;white-space:nowrap;"]);function le(e){var t=e.selectedCounty,n=e.setSelectedCounty,a=e.MapSettings,i=e.time,o=(e.setTime,e.week),l=e.setWeek,c=e.selectedState,s=e.setSelectedState,u=e.width,d=(0,r.useState)(!1),p=d[0],f=d[1],h=(0,r.useContext)(w.z),m=h.mapData,g=h.mapTitles,x=(0,r.useState)(!1),b=x[0],v=x[1],k=(0,r.useState)(Array(4)),E=k[0],C=k[1],S=(0,r.useState)(!1),_=S[0],P=S[1],j=(0,r.useState)(!1),I=j[0],A=j[1],O=function(e,t){var n,r=e[0],a=e[1];return void 0===t&&(t=!1),E.forEach((function(e){t||r===e.currId||-1===r?(e.reset(),n=!1):(e.select(r),n=!0)})),n?(s([r,a]),!0):(s([-1,""]),!1)};return(0,r.useEffect)((function(){if(b){var e=setInterval((function(){o<51&&l(o+1)}),500);return function(){return clearInterval(e)}}}),[b,o]),r.createElement(Q,null,r.createElement(J,null,r.createElement(K,null,r.createElement(ee,null,"The ",r.createElement("i",null,"cumulative map")," option shows all of the counties that were once a hotspot or coldspot up to the current date on the timeline. Hotspots or coldspots on the current week are shaded a darker color while past values become lighter as more weeks go by."),r.createElement(ee,null," ","The ",r.createElement("i",null,"show timeline events")," option highlights a few national level events that give context on the state of the pandemic. These events are placed on top of the timeline and their text color is darkened as you pass by them."),-1===c[0]?r.createElement(ee,null,r.createElement("b",null,"Click on a state to zoom in.")):r.createElement(oe,null,"Selected State: ",c[1])),r.createElement($,null,r.createElement(ae,null,r.createElement("form",null,r.createElement(ie,null,r.createElement("input",{type:"checkbox",id:"Cumulative",onChange:function(){return f(!p)},checked:p}),r.createElement("label",{htmlFor:"Cumulative"},"Cumulative Map")),r.createElement(ie,null,r.createElement("input",{type:"checkbox",id:"ShowWeek",onChange:function(){return P(!_)},checked:_}),r.createElement("label",{htmlFor:"ShowWeek"},"Show Week Number")),u?null:r.createElement(ie,null,r.createElement("input",{type:"checkbox",id:"ShowEvents",onChange:function(){return A(!I)},checked:I}),r.createElement("label",{htmlFor:"ShowEvents"},"Timeline Events")))),r.createElement(re,{onClick:function(){O([-1,""]),l(0),f(!1),v(!1),P(!1),A(!1)}},"Reset"))),r.createElement(te,null),p?r.createElement(H,{week:o}):r.createElement(X,null,r.createElement(G,null,r.createElement(U,null,"Hot Spot"),r.createElement(q,null,"Cold Spot"))),r.createElement(y.o,null,r.createElement(ne,null,g.map((function(e,l){return r.createElement(N,{key:l,title:e,highlightedCounty:t,countySelector:n,selectedState:c,stateSelector:O,addState:function(e){return function(e,t){E[t]=e,C(E)}(e,l)},time:i,data:m?m[l]:null,weekNum:o,MapSettings:a,past:p},null)})))),r.createElement(R,{week:o,setWeek:l,playing:b,setPlaying:v,showWeekNumber:_,showEvents:I,mobileMode:u}))}var ce=h.ZP.div.withConfig({displayName:"table__OutsideContainer",componentId:"b45yk0-0"})(["height:100%;width:100%;display:flex;align-items:center;flex-direction:column;margin-top:20px;"]),se=h.ZP.div.withConfig({displayName:"table__Container",componentId:"b45yk0-1"})(["display:block;height:100%;overflow-x:auto;width:800px;@media (max-width:800px){width:100%;}"]),ue=h.ZP.table.withConfig({displayName:"table__MainTable",componentId:"b45yk0-2"})(["border-collapse:collapse;width:100%;"]),de=h.ZP.thead.withConfig({displayName:"table__THead",componentId:"b45yk0-3"})([""]),pe=h.ZP.th.withConfig({displayName:"table__THGroup",componentId:"b45yk0-4"})(["text-align:center;",""],(function(e){return e.underLine?"border-bottom: 1px solid black; border-left: 20px solid white; border-right: 20px solid white;":null})),fe=h.ZP.th.withConfig({displayName:"table__TH",componentId:"b45yk0-5"})(["min-width:100px !important;text-align:center;border-bottom:1px solid black;"]),he=h.ZP.td.withConfig({displayName:"table__TData",componentId:"b45yk0-6"})(["background-color:",";padding:0;margin:0;"],(function(e){var t=e.highlight;return"hot"===t?"#fa5a50AA":"cold"===t?"#5768acAA":"#FFFFFF00"})),me=h.ZP.tr.withConfig({displayName:"table__TRow",componentId:"b45yk0-7"})([""]),ge=h.ZP.tbody.withConfig({displayName:"table__TBody",componentId:"b45yk0-8"})([""," > *:nth-child(2n+1){width:10px;padding:2px;}"," > *{text-align:right;}& > ",":hover{background-color:#d3d3d3;}"," > *:nth-child(2n){width:100px;}"," > *:nth-child(1){width:130px;text-align:left;border-right:1px solid black;}"," > *:nth-child(3){}"," > *:nth-child(7){}"," > *:nth-child(5){border-right:1px solid black;}","{border-bottom:1px solid rgb(205,205,205);}",":last-child{border-bottom:1px solid black;}"],me,me,me,me,me,me,me,me,me,me),we=h.ZP.p.withConfig({displayName:"table__ColdLegend",componentId:"b45yk0-9"})(["background-color:#5768acaa;"]),ye=h.ZP.p.withConfig({displayName:"table__HotLegend",componentId:"b45yk0-10"})(["background-color:#fa5a50aa;"]),xe=h.ZP.div.withConfig({displayName:"table__LegendContainer",componentId:"b45yk0-11"})(["display:flex;width:800px;margin:5px 0;@media (max-width:800px){width:100%;}justify-content:space-between;"]),be=h.ZP.div.withConfig({displayName:"table__Legend",componentId:"b45yk0-12"})(["display:flex;align-items:flex-start;& > *{margin:5px;padding:5px;}"]),ve=h.ZP.p.withConfig({displayName:"table__LegendAsterisk",componentId:"b45yk0-13"})(["margin:5px;"]);function ke(e){var t=e.selectedState,n=e.week,a=(0,r.useContext)(w.z),i=a.mapData;a.mapTitles;return r.createElement(ce,null,r.createElement(se,null,r.createElement(ue,null,r.createElement(de,null,r.createElement(me,null,r.createElement(pe,{underLine:!1},"Counties of"),r.createElement(pe,{colSpan:4,underLine:!0},"Mobility"),r.createElement(pe,{colSpan:4,underLine:!0},"Sheltered")),r.createElement(me,null,r.createElement(fe,null,t[1]),r.createElement(fe,{colSpan:2},"Cuebiq*"),r.createElement(fe,{colSpan:2},"SafeGraph"),r.createElement(fe,{colSpan:2},"Cuebiq"),r.createElement(fe,{colSpan:2},"SafeGraph"))),r.createElement(ge,null,r.createElement(m.i1,{query:"2834450407",render:function(e){return e.allRawCsv.nodes.filter((function(e){return Number(e.week)-1===n&&(r=e.fips,Number(String(r).slice(0,-3))===t[0]);var r})).map((function(e,t){var a=e.fips,o=e.cm,l=e.cs,c=e.sm,s=e.ss,u=i[0].find((function(e){return e.fips===Number(a)})),d=void 0!==u?u.get(n):0,p=i[1].find((function(e){return e.fips===Number(a)})),f=void 0!==p?p.get(n):0,h=i[2].find((function(e){return e.fips===Number(a)})),m=void 0!==h?h.get(n):0,g=i[3].find((function(e){return e.fips===Number(a)})),w=void 0!==g?g.get(n):0;return r.createElement(me,{key:a},r.createElement(he,{highlight:"none"},v.objects.counties.geometries.find((function(e){var t=e.id;return Number(t)===Number(a)})).properties.name),r.createElement(r.Fragment,null,r.createElement(he,{highlight:1===d?"hot":2===d?"cold":"none"},o),r.createElement(he,{highlight:1===d?"hot":2===d?"cold":"none"})),r.createElement(r.Fragment,null,r.createElement(he,{highlight:1===m?"hot":2===m?"cold":"none"},Number(c)/1e3),r.createElement(he,{highlight:1===m?"hot":2===m?"cold":"none"},0===t?"km":"")),r.createElement(r.Fragment,null,r.createElement(he,{highlight:1===f?"hot":2===f?"cold":"none"},l),r.createElement(he,{highlight:1===f?"hot":2===f?"cold":"none"},0===t?"%":"")),r.createElement(r.Fragment,null,r.createElement(he,{highlight:1===w?"hot":2===w?"cold":"none"},s),r.createElement(he,{highlight:1===w?"hot":2===w?"cold":"none"},0===t?"%":"")))}))}})))),r.createElement(xe,null,r.createElement(ve,null,"* Cuebiq mobility value is an index."),r.createElement(be,null,r.createElement(ye,null,"Hot Spot"),r.createElement(we,null,"Cold Spot"))))}var Ee=h.ZP.div.withConfig({displayName:"animated__Container",componentId:"sc-13u7wpn-0"})(["width:100%;display:flex;align-items:center;flex-direction:column;"]),Ce=h.ZP.div.withConfig({displayName:"animated__TextContainer",componentId:"sc-13u7wpn-1"})(["display:flex;flex-direction:column;justify-content:start;width:100%;& > h1{margin:10px 15px 0 15px;}"]),Se=h.ZP.hr.withConfig({displayName:"animated__Divider",componentId:"sc-13u7wpn-2"})(["width:98%;height:1px;background-color:black;border-radius:1px;margin:5px 10px;"]),Ne=h.ZP.p.withConfig({displayName:"animated__Text",componentId:"sc-13u7wpn-3"})(["margin:5px 15px;"]),_e={width:370,height:250,translate:[185,125],scale:500},Pe=function(){var e=(0,r.useState)([-1,""]),t=e[0],n=e[1],a=(0,r.useState)([0,52]),i=a[0],o=a[1],l=(0,r.useState)(0),c=l[0],s=l[1],d=(0,r.useState)([-1,""]),p=d[0],f=d[1],h=(0,r.useRef)(null),w=u("(max-width: 750px)");return r.createElement(g.Z,{selectedPage:"Animation"},r.createElement(Ee,{ref:h},r.createElement(Ce,null,r.createElement("h1",null,"Animated Spatial Clustering"),r.createElement(Ne,null,"This page has four animated choropleth maps that show the spatial clustering in our variables for each week in 2020. Counties classified as hotspots are colored red and counties classified as coldspots are colored blue. For more information on how counties are classified as hotspots or coldspots see the"," ",r.createElement(m.rU,{to:"/"},"About Page"),"."),r.createElement(Ne,null,"The top row of plots includes data from Cuebiq while the bottom row is from Safegraph. The column on the left shows the sources' measures of mobility while the column on the right is of measures of sheltering. If all of these variables are showing the same phenomenon then we would expect the same patterns in the each column and inverted colors across the rows. However, one of the points to be made by comparing different variables and different sources is that they don't show the exact same patterns which could lead to different predictions in models using different data.")),r.createElement(Se,null),r.createElement(le,{MapSettings:_e,selectedCounty:t,setSelectedCounty:n,time:i,setTime:o,week:c,setWeek:s,selectedState:p,setSelectedState:f,width:w}),r.createElement(Se,null),-1!==p[0]?r.createElement(r.Fragment,null,r.createElement(Ce,null,r.createElement(Ne,null,"The table below shows the individual values that were used in the Local Moran test to calculate if a county was a hotspot or coldspot in the current week. This table just shows the counties in the selected state although the Local Moran test was run using every county in the US.")),r.createElement(ke,{selectedState:p,week:c})):r.createElement(Ce,null,r.createElement(Ne,null,"Click on a state above to see a table of the state's county values.")),r.createElement(Ce,null,r.createElement(Ne,null,"One of the first things to notice is how sparse the classifications are in Safegraph's mobility measure in the column on the left. If you turn on the cumulative map option and play the animation to the end, we can see all of the counties that were once classified in the year. While the other three maps are mostly colored in, this map has more counties that were never significant."),r.createElement(Ne,null,"On the 13th week, 3/23-3/29, we can see an abrupt change in the maps. These dates correspond to just after the declaration of a national emergency which is listed on the timeline events. In all of the weeks leading up to these dates, we see a large number of counties classified as coldspots in Cuebiq mobility and hotspots in the sheltered column, particularly in the west, which go away as the pandemic begins. However, particularly in the South around Mississippi and Alabama, we don't see this change as the classification of these counties remain constant throughout the year."))))}},8928:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(1839),a=function(){function e(e,t,n,a,i){this.active=r.Ys(null),this.path=null,this.g=null,this.width=0,this.height=0,this.currId=-1,this.path=e,this.g=t,this.width=n,this.height=a,this.currId=i}var t=e.prototype;return t.select=function(e){var t;this.currId=e,this.g.select("[stateFips='"+e+"']").attr("x",(function(e,n){t=e}));var n=this.path.bounds(t),r=n[0],a=r[0],i=r[1],o=n[1],l=o[0],c=o[1],s=l-a,u=c-i,d=(a+l)/2,p=(i+c)/2,f=.8/Math.max(s/this.width,u/this.height),h=[this.width/2-f*d,this.height/2-f*p];return this.g.transition().duration(650).attr("transform","translate("+h+") scale("+f+")"),f},t.clicked=function(e,t){var n=e.getAttribute("id");if(this.active.node()===e)return this.reset();this.active.classed("active",!1),this.active=r.Ys(e).classed("active",!0);var a=this.path.bounds(t),i=a[0],o=i[0],l=i[1],c=a[1],s=c[0],u=c[1],d=s-o,p=u-l,f=(o+s)/2,h=(l+u)/2,m=.7/Math.max(d/this.width,p/this.height),g=[this.width/2-m*f,this.height/2-m*h];return this.g.transition().duration(650).attr("transform","translate("+g+") scale("+m+")"),n},t.reset=function(){this.currId="",this.active.classed("active",!1),this.active=r.Ys(null),this.g.transition().duration(500).attr("transform","translate(0)")},e}()}}]);
//# sourceMappingURL=component---src-pages-animated-tsx-e7fa424f815600791bdd.js.map