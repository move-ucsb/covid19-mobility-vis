{"version":3,"sources":["webpack://my-gatsby-site/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://my-gatsby-site/./node_modules/@babel/runtime/helpers/objectWithoutProperties.js","webpack://my-gatsby-site/./src/contexts/mapsContext.tsx","webpack://my-gatsby-site/./src/components/bivar/map2.tsx","webpack://my-gatsby-site/./node_modules/@styled-icons/styled-icon/index.esm.js","webpack://my-gatsby-site/./node_modules/@styled-icons/bootstrap/PlayCircleFill/PlayCircleFill.esm.js","webpack://my-gatsby-site/./node_modules/@styled-icons/bootstrap/PauseCircleFill/PauseCircleFill.esm.js","webpack://my-gatsby-site/./node_modules/@styled-icons/boxicons-solid/SkipPreviousCircle/SkipPreviousCircle.esm.js","webpack://my-gatsby-site/./node_modules/@styled-icons/boxicons-solid/SkipNextCircle/SkipNextCircle.esm.js","webpack://my-gatsby-site/./node_modules/@styled-icons/remix-fill/Restart/Restart.esm.js","webpack://my-gatsby-site/./src/components/bivar/timelineOld.tsx","webpack://my-gatsby-site/./src/components/bivar/controls.tsx","webpack://my-gatsby-site/./src/components/bivar/mapView2.tsx","webpack://my-gatsby-site/./src/components/bivar/table.tsx","webpack://my-gatsby-site/./src/pages/animated.tsx"],"names":["module","exports","obj","key","value","Object","defineProperty","enumerable","configurable","writable","__esModule","objectWithoutPropertiesLoose","source","excluded","i","target","getOwnPropertySymbols","sourceSymbolKeys","length","indexOf","prototype","propertyIsEnumerable","call","MapsContext","createContext","Maps","children","states","topojson","countiesMap","features","counties","Provider","Container","styled","Title","MapContainer","border","getStateFips","fips","Number","String","slice","title","data","highlightedCounty","countySelector","MapSettings","time","weekNum","past","addState","stateSelector","selectedState","scale","translate","width","height","d3Container","useRef","useContext","useEffect","projection","d3","map_path","map_g","current","attr","append","MapZoom","style","selectAll","enter","id","val","properties","name","forEach","d","getLast","curr","last","weeks","col","opac","Math","pow","sel","select","on","currentTarget","getAttribute","ref","ownKeys","object","enumerableOnly","keys","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","filterSVGProps","props","reduce","p","k","StyledIconBaseBase","iconAttrs","iconViewBox","iconVerticalAlign","size","otherProps","iconProps","arguments","getOwnPropertyDescriptors","defineProperties","_objectSpread","viewBox","undefined","focusable","role","svgProps","StyledIconBase","withConfig","displayName","componentId","PlayCircleFill","PauseCircleFill","SkipPreviousCircle","SkipNextCircle","Restart","fill","Slider","ButtonArea","convertDate","Date","nextDate","initial","n","getTime","week","setWeek","playing","setPlaying","console","log","months","dates","DatesContext","map","labels","Array","getDate","x","domain","range","clamp","update","find","newDate","endDate","text","getMonth","slider","insert","invert","this","parentNode","appendChild","cloneNode","interrupt","event","onClick","TextArea","Text","Controls","ControlArea","ControlsContainer","TextContainer","Divider","Button","CheckBox","MapView","selectedCounty","setSelectedCounty","setTime","setSelectedState","useState","setPast","LisaContext","mapData","mapTitles","mapZoom","setMapZoom","reset","zooming","m","currId","timer","setInterval","clearInterval","type","onChange","htmlFor","OutsideContainer","MainTable","THead","THGroup","underLine","TH","TData","highlight","TRow","TBody","ColdLegend","HotLegend","LegendContainer","Legend","LegendAsterisk","Table","colSpan","query","render","allRawCsv","nodes","node","cm","cs","sm","ss","cmVec","cmVal","get","csVec","csVal","smVec","smVal","ssVec","ssVal","container","setWidth","getBoundingClientRect","selectedPage"],"mappings":"oGAeAA,EAAOC,QAfP,SAAyBC,EAAKC,EAAKC,GAYjC,OAXID,KAAOD,EACTG,OAAOC,eAAeJ,EAAKC,EAAK,CAC9BC,MAAOA,EACPG,YAAY,EACZC,cAAc,EACdC,UAAU,IAGZP,EAAIC,GAAOC,EAGNF,GAITF,EAAOC,QAAP,QAA4BD,EAAOC,QAASD,EAAOC,QAAQS,YAAa,G,qBChBxE,IAAIC,EAA+B,EAAQ,MAqB3CX,EAAOC,QAnBP,SAAkCW,EAAQC,GACxC,GAAc,MAAVD,EAAgB,MAAO,GAC3B,IACIT,EAAKW,EADLC,EAASJ,EAA6BC,EAAQC,GAGlD,GAAIR,OAAOW,sBAAuB,CAChC,IAAIC,EAAmBZ,OAAOW,sBAAsBJ,GAEpD,IAAKE,EAAI,EAAGA,EAAIG,EAAiBC,OAAQJ,IACvCX,EAAMc,EAAiBH,GACnBD,EAASM,QAAQhB,IAAQ,GACxBE,OAAOe,UAAUC,qBAAqBC,KAAKV,EAAQT,KACxDY,EAAOZ,GAAOS,EAAOT,IAIzB,OAAOY,GAITf,EAAOC,QAAP,QAA4BD,EAAOC,QAASD,EAAOC,QAAQS,YAAa,G,2HCf3Da,GAAcC,mBAAc,MAE5BC,EAAO,SAAC,GAAiB,IAAfC,EAAe,EAAfA,SAEfC,EAASC,KAAiBC,EAAaA,kBAA4BC,SACnEC,EAAWH,KAAiBC,EAAaA,oBAA8BC,SAE7E,OACE,gBAACP,EAAYS,SAAb,CAAsB5B,MAAO,CAAEuB,SAAQI,aACpCL,K,mKCHDO,EAAYC,oBAAH,0DAAGA,CAAH,yKAeTC,EAAQD,mBAAH,sDAAGA,CAAH,eAILE,EAAeF,oBAAH,6DAAGA,CAAH,mEAMZ,qBAAGG,OAA4C,QAAU,WA2BzDC,EAAe,SAACC,GACpB,OAAOC,OAAOC,OAAOF,GAAMG,MAAM,GAAI,KAyHvC,EAvHY,SAAC,GAYA,IAXXC,EAWW,EAXXA,MAGAC,GAQW,EAVXC,kBAUW,EATXC,eASW,EARXF,MAEAG,GAMW,EAPXC,KAOW,EANXD,aACAE,EAKW,EALXA,QACAC,EAIW,EAJXA,KACAC,EAGW,EAHXA,SACAC,EAEW,EAFXA,cACAC,EACW,EADXA,cAEQC,EAAoCP,EAApCO,MAAOC,EAA6BR,EAA7BQ,UAAWC,EAAkBT,EAAlBS,MAAOC,EAAWV,EAAXU,OAE3BC,GAAcC,YAAO,MAHhB,GAKkBC,gBAAWrC,KAAhCQ,EALG,EAKHA,SAAUJ,EALP,EAKOA,OA8FlB,OA7FAkC,gBAAU,WACR,IAAMC,EAAaC,QAAeT,MAAMA,GAAOC,UAAUA,GACnDS,EAAWD,QAAaD,WAAWA,GAEnCG,EAAQF,KACJL,EAAYQ,SACnBC,KAAK,QAASX,GACdW,KAAK,SAAUV,GACfW,OAAO,KAEVjB,EAAS,IAAIkB,IAAQL,EAAUC,EAAOT,EAAOC,EAAQJ,EAAc,KAGnEY,EACGG,OAAO,KACPE,MAAM,SAAU,SAChBA,MAAM,eAAgB,SACtBA,MAAM,OAAQ,aACdC,UAAU,QACV3B,KAAKjB,GACL6C,QACAJ,OAAO,QACPD,KAAK,IAAKH,GACVG,KAAK,aAAa,gBAAGM,EAAH,EAAGA,GAAH,OAAYjC,OAAOiC,MAGxCR,EACGG,OAAO,KACPG,UAAU,QACV3B,KAAKb,GACLyC,QACAJ,OAAO,QACPD,KAAK,IAAKH,GACVG,KAAK,aAAa,YAAY,IAATM,EAAS,EAATA,GACpB,OAAO5C,kCAA2C,SAAC6C,GACjD,OAAOpC,EAAamC,KAAQjC,OAAOkC,EAAID,OACtCE,WAAWC,QAEfT,KAAK,MAAM,gBAAGM,EAAH,EAAGA,GAAH,UAAgBjC,OAAOiC,MAElCN,KAAK,QAAS,aACdG,MAAM,OAAQ,eAGhB,KAEHT,gBAAU,WACRjB,EAAKiC,SAAQ,SAACC,GAAM,MACYA,EAAEC,QAAQ9B,GAAhC+B,EADU,EACVA,KAAMC,EADI,EACJA,KAAMC,EADF,EACEA,MAEhBC,EAAM,YACRC,EAAO,EAEJlC,GAAiB,IAAT8B,EAEF9B,IACTiC,EAAgB,IAATH,GAAuB,IAATA,GAAwB,IAATC,EAAa,UAAY,UAG7DG,EAAOJ,EACH,GACE/B,EAAUiC,EAAQ,IAAMjC,EAAU,GAAMT,QAAiB,IAAVyC,IAPrDE,EAAe,IAATH,EAAa,UAAY,UAWjCI,GAAQC,KAAKC,IACX,EAAI,EACJ,EACE9C,OACEF,EAAawC,EAAEvC,QAAUc,EAAc,KAA4B,IAAtBA,EAAc,KAIjE,IAAMkC,EAAMxB,KAAUL,EAAYQ,SAASsB,OAA/B,KAA2CV,EAAEvC,MACzDgD,EAAIjB,MAAM,OAAQa,GAClBI,EAAIjB,MAAM,eAAgBc,QAE3B,CAACnC,EAASC,EAAMG,KAEnBQ,gBAAU,WACRE,KAAUL,EAAYQ,SACnBK,UAAU,cACVkB,GAAG,SAAS,SAAU,EAAV,GAAqC,IAAzBC,EAAyB,EAAzBA,cAAmBjB,EAAM,EAANA,GAC1CrB,EAAc,CACZd,EAAamC,GACbiB,EAAcC,aAAa,oBAMhC,CAACtC,IAGF,gBAACpB,EAAD,KACE,gBAACE,EAAD,KAAQQ,GACR,gBAACP,EAAD,CAAcwD,IAAKlC,EAAarB,QAA8B,IAAtBgB,EAAc,O,uFClL5D,SAASwC,EAAQC,EAAQC,GACvB,IAAIC,EAAO3F,OAAO2F,KAAKF,GAEvB,GAAIzF,OAAOW,sBAAuB,CAChC,IAAIiF,EAAU5F,OAAOW,sBAAsB8E,GACvCC,IAAgBE,EAAUA,EAAQC,QAAO,SAAUC,GACrD,OAAO9F,OAAO+F,yBAAyBN,EAAQK,GAAK5F,eAEtDyF,EAAKK,KAAKC,MAAMN,EAAMC,GAGxB,OAAOD,EA+BT,SAASO,EAAeC,GACtB,OAAOnG,OAAO2F,KAAKQ,GAAOC,QAAO,SAAUC,EAAGC,GALhD,IAAqBxG,EAYjB,OAZiBA,EAMDwG,GALX,OAAUxG,KAQbuG,EAAEC,GAAKH,EAAMG,IAGRD,IACN,IAGL,IAAIE,EAAkC,cAAiB,SAAUJ,EAAOZ,GACtE,IAAIlE,EAAW8E,EAAM9E,SACjBmF,EAAYL,EAAMK,UAElBC,GADoBN,EAAMO,kBACZP,EAAMM,aACpBE,EAAOR,EAAMQ,KACbrE,EAAQ6D,EAAM7D,MACdsE,EAAa,IAAyBT,EAAO,CAAC,WAAY,YAAa,oBAAqB,cAAe,OAAQ,UAEnHU,EAjDN,SAAuBnG,GACrB,IAAK,IAAID,EAAI,EAAGA,EAAIqG,UAAUjG,OAAQJ,IAAK,CACzC,IAAIF,EAAyB,MAAhBuG,UAAUrG,GAAaqG,UAAUrG,GAAK,GAE/CA,EAAI,EACN+E,EAAQxF,OAAOO,IAAS,GAAMiE,SAAQ,SAAU1E,GAC9C,IAAgBY,EAAQZ,EAAKS,EAAOT,OAE7BE,OAAO+G,0BAChB/G,OAAOgH,iBAAiBtG,EAAQV,OAAO+G,0BAA0BxG,IAEjEiF,EAAQxF,OAAOO,IAASiE,SAAQ,SAAU1E,GACxCE,OAAOC,eAAeS,EAAQZ,EAAKE,OAAO+F,yBAAyBxF,EAAQT,OAKjF,OAAOY,EAgCSuG,CAAc,CAC5BC,QAAST,EACTrD,YAAyB+D,IAAjBhB,EAAM/C,OAAuB+C,EAAM/C,OAASuD,EACpDxD,WAAuBgE,IAAhBhB,EAAMhD,MAAsBgD,EAAMhD,MAAQwD,EACjD,cAAwB,MAATrE,EAAgB,YAAS6E,EACxCC,UAAW,QACXC,KAAe,MAAT/E,EAAgB,WAAQ6E,GAC7BX,GAECc,EAAWpB,EAAeU,GAC9B,OAAoB,gBAAoB,MAAO,IAAS,GAAIC,EAAWS,EAAU,CAC/E/B,IAAKA,IACHjD,GAAsB,gBAAoB,QAAS,CACrDxC,IAAK,cACJwC,GAAQjB,MAEFkG,GAA8B,QAAOhB,GAAoBiB,WAAW,CAC7EC,YAAa,iBACbC,YAAa,YAF0B,CAGtC,CAAC,uCAAwC,sBAAsB,SAAUvB,GAC1E,OAAOA,EAAMO,qBCpFJiB,EAA8B,cAAiB,SAAUxB,EAAOZ,GAKzE,OAAoB,gBAAoBgC,EAAgB,IAAS,CAC/Df,UALU,CACV,KAAQ,eACR,MAAS,8BAITE,kBAAmB,SACnBD,YAAa,aACZN,EAAO,CACRZ,IAAKA,IACU,gBAAoB,OAAQ,CAC3Cd,EAAG,iIAGPkD,EAAeF,YAAc,iBACtB,IChBIG,EAA+B,cAAiB,SAAUzB,EAAOZ,GAK1E,OAAoB,gBAAoBgC,EAAgB,IAAS,CAC/Df,UALU,CACV,KAAQ,eACR,MAAS,8BAITE,kBAAmB,SACnBD,YAAa,aACZN,EAAO,CACRZ,IAAKA,IACU,gBAAoB,OAAQ,CAC3Cd,EAAG,qNAGPmD,EAAgBH,YAAc,kBACvB,IChBII,EAAkC,cAAiB,SAAU1B,EAAOZ,GAK7E,OAAoB,gBAAoBgC,EAAgB,IAAS,CAC/Df,UALU,CACV,KAAQ,eACR,MAAS,8BAITE,kBAAmB,SACnBD,YAAa,aACZN,EAAO,CACRZ,IAAKA,IACU,gBAAoB,OAAQ,CAC3Cd,EAAG,mHAGPoD,EAAmBJ,YAAc,qBAC1B,IChBIK,EAA8B,cAAiB,SAAU3B,EAAOZ,GAKzE,OAAoB,gBAAoBgC,EAAgB,IAAS,CAC/Df,UALU,CACV,KAAQ,eACR,MAAS,8BAITE,kBAAmB,SACnBD,YAAa,aACZN,EAAO,CACRZ,IAAKA,IACU,gBAAoB,OAAQ,CAC3Cd,EAAG,6GAGPqD,EAAeL,YAAc,iBACtB,IChBIM,EAAuB,cAAiB,SAAU5B,EAAOZ,GAKlE,OAAoB,gBAAoBgC,EAAgB,IAAS,CAC/Df,UALU,CACV,KAAQ,eACR,MAAS,8BAITE,kBAAmB,SACnBD,YAAa,aACZN,EAAO,CACRZ,IAAKA,IACU,gBAAoB,OAAQ,CAC3CyC,KAAM,OACNvD,EAAG,kBACY,gBAAoB,OAAQ,CAC3CA,EAAG,2JAGPsD,EAAQN,YAAc,UACf,ICTD7F,EAAYC,oBAAH,kEAAGA,CAAH,+BAKToG,EAASpG,oBAAH,+DAAGA,CAAH,+BAKNqG,EAAarG,oBAAH,mEAAGA,CAAH,oGA0BVsG,GAZStG,uBAAH,+DAAGA,CAAH,yBAYQ,SAAC4C,GACnB,OAAO,IAAI2D,KAAQ3D,EAAZ,UAGH4D,EAAW,SAACC,EAAeC,GAO/B,OAAO,IAAIH,KAAKE,EAAQE,UAAY,MAAsBD,IA4M5D,EAzMiB,SAAC,GAAyD,IAAvDE,EAAuD,EAAvDA,KAAMC,EAAiD,EAAjDA,QAASC,EAAwC,EAAxCA,QAASC,EAA+B,EAA/BA,WAAYzF,EAAmB,EAAnBA,MACtD0F,QAAQC,IAAI3F,GAEZ,IAAM4F,EAAS,CACb,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OAGIC,GAAQzF,gBAAW0F,KAAcC,KAAI,SAACzE,GAAD,OAAO0D,EAAY1D,MAGxD0E,GAAS,OAAIC,MAAM,KAAKzD,QAC3BuD,KAAI,SAACzI,GACJ,MAAO,CAAEgE,EAAG4D,EAASW,EAAM,GAAIvI,GAAIA,QAEpCoF,QAAO,YACN,OAAuB,IADN,EAARpB,EACA4E,aAGPhG,GAAcC,YAAO,MAErBgG,EAAI5F,OAEP6F,OAAO,CAACP,EAAM,GAAIA,EAAMA,EAAMnI,OAAS,KACvC2I,MAAM,CAAC,EAAG,MACVC,OAAM,GAEHC,EAAS,SAACrF,GACd,IAAI5D,EAEA4D,aAAe+D,MACjB3H,GAAI,OAAI2I,MAAMJ,EAAMnI,QAAQ8E,QAAQgE,MAAK,SAAClJ,GACxC,OACEuI,EAAMvI,GAAK4D,GACX5D,IAAMuI,EAAMnI,OAAS,GACpBmI,EAAMvI,IAAM4D,GAAa,IAAN5D,KAGxBiI,EAAQjI,IAERA,EAAI4D,EAGN,IAAMuF,EAAUZ,EAAMvI,GAChBoJ,EACJpJ,EAAI,EAAIuI,EAAMnI,OACVwH,EAASW,EAAMvI,EAAI,IAAK,GACxB0H,EAAY,cAElBzE,KAAUL,EAAYQ,SAASsB,OAAO,WAAWrB,KAAK,KAAMwF,EAAEM,IAC9DlG,KAAUL,EAAYQ,SACnBsB,OAAO,UACPrB,KAAK,IAAKwF,EAAEM,IACZE,KACIF,EAAQG,WAAa,EAJ5B,IAIiCH,EAAQP,UAJzC,OAKMQ,EAAQE,WAAa,GAL3B,IAMQF,EAAQR,YAqFlB,OAjFA7F,gBAAU,WACR,IAMMwG,EANMtG,KACFL,EAAYQ,SACnBE,OAAO,OACPD,KAAK,QAAS,KACdA,KAAK,SAAU,KAGfC,OAAO,KACPD,KAAK,YAAa,qBAClBA,KAAK,KAAM,UAEdkG,EACGC,OAAO,KACP/F,UAAU,QACV3B,KAAK4G,GACLhF,QACAJ,OAAO,QACPD,KAAK,KAAK,gBAAGW,EAAH,EAAGA,EAAH,OAAW6E,EAAE7E,MACvBX,KAAK,IAAK,IACVA,KAAK,cAAe,UACpBgG,MAAK,gBAAGrF,EAAH,EAAGA,EAAH,OAAWsE,EAAOtE,EAAEsF,eAE5BC,EAAOjG,OAAO,KAAKD,KAAK,KAAM,eAC9BkG,EAAOjG,OAAO,KAAKD,KAAK,KAAM,mBAE9BkG,EACGjG,OAAO,QACPD,KAAK,IAAKwF,EAAEA,EAAEY,OAAO,OACrBpG,KAAK,IAAK,IACVgG,KAAK,QAERE,EAAOjG,OAAO,QAAQD,KAAK,KAAM,IAAIA,KAAK,IAAK,GAAGgG,KAAK,QAEvDE,EACGjG,OAAO,QACPD,KAAK,KAAM,IACXA,KAAK,IAAK,IACVA,KAAK,KAAM,eACXgG,KAAK,QACLhG,KAAK,cAAe,UAERkG,EAAOC,OAAO,UAAUnG,KAAK,KAAM,UAAUA,KAAK,IAAK,GAExDkG,EACXjG,OAAO,QACPD,KAAK,KAAM,SACXA,KAAK,cAAe,UACpBA,KAAK,YAAa,oBAErBkG,EACGjG,OAAO,QACPD,KAAK,SAAU,SACfA,KAAK,eAAgB,QACrBA,KAAK,iBAAkB,IACvBA,KAAK,iBAAkB,SACvBA,KAAK,KAAMwF,EAAEE,QAAQ,IACrB1F,KAAK,KAAMwF,EAAEE,QAAQ,IACrBrE,QAAO,WACN,OAAOgF,KAAKC,WAAWC,YAAYF,KAAKG,WAAU,OAEnDxG,KAAK,eAAgB,SACrBA,KAAK,SAAU,eACf7C,KACCyC,QAEG0B,GAAG,mBAAmB,kBAAM4E,EAAOO,eACnCnF,GAAG,cAAc,SAACoF,GACjB5B,GAAW,GACXc,EAAOJ,EAAEY,OAAOM,EAAMlB,UAG7B,CAACnG,KAEJK,gBAAU,WACRkG,EAAOjB,GACP/E,KAAUL,EAAYQ,SACnBsB,OAAO,gBACP2E,KAAQrB,EAAO,EAFlB,SAGC,CAACA,EAAMtF,IAGR,gBAAC,EAAD,KACE,gBAAC8E,EAAD,CAAQ1C,IAAKlC,IACb,gBAAC6E,EAAD,KACE,gBAACL,EAAD,CACElB,KAAK,OACL8D,QAAS,WACHhC,EAAO,GACTC,EAAQD,EAAO,GAEjBG,GAAW,MAGL,KAATH,EACC,gBAACV,EAAD,CACEpB,KAAK,OACL8D,QAAS,WACP/B,EAAQ,GACRE,GAAW,MAGbD,EACF,gBAACf,EAAD,CACEjB,KAAK,OACL8D,QAAS,WACP7B,GAAW,MAIf,gBAACjB,EAAD,CACEhB,KAAK,OACL8D,QAAS,WACP7B,GAAW,MAIjB,gBAACd,EAAD,CACEnB,KAAK,OACL8D,QAAS,WACHhC,EAAO,IACTC,EAAQD,EAAO,GAEjBG,GAAW,SCnPjBhH,EAAYC,oBAAH,2DAAGA,CAAH,iBAITqG,EAAarG,oBAAH,4DAAGA,CAAH,oGAyBVsG,GAXStG,uBAAH,wDAAGA,CAAH,yBAWQ,SAAC4C,GACnB,OAAO,IAAI2D,KAAQ3D,EAAZ,UAaHiG,EAAW7I,oBAAH,0DAAGA,CAAH,oFAQR8I,EAAO9I,kBAAH,sDAAGA,CAAH,mBAIK,SAAS+I,EAAT,GAKL,IA3BQtC,EAAeC,EAuB/BE,EAIQ,EAJRA,KACAC,EAGQ,EAHRA,QACAC,EAEQ,EAFRA,QACAC,EACQ,EADRA,WAEMG,EAAS,CACb,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,MACA,OAGIC,GAAQzF,gBAAW0F,KAAcC,KAAI,SAACzE,GAAD,OAAO0D,EAAY1D,MAExDmF,EAAUZ,EAAMP,GAChBoB,EACNpB,EAAO,EAAIO,EAAMnI,QA/CDyH,EAgDDU,EAAMP,EAAO,GAhDGF,GAgDE,EAzC1B,IAAIH,KAAKE,EAAQE,UAAY,MAAsBD,IA0CpDJ,EAAY,cAClB,OACE,gBAAC,EAAD,KACE,gBAACuC,EAAD,KACE,gBAACC,EAAD,aAAYlC,EAAO,EAAnB,OACA,gBAACkC,EAAD,KACG5B,EAAOa,EAAQG,YADlB,IACgCH,EAAQP,UADxC,MACsDN,EAAOc,EAAQE,YADrE,IACmFF,EAAQR,YAG7F,gBAAC,EAAD,KACE,gBAACxB,EAAD,CACElB,KAAK,OACL8D,QAAS,WACHhC,EAAO,GACTC,EAAQD,EAAO,GAEjBG,GAAW,MAGL,KAATH,EACC,gBAACV,EAAD,CACEpB,KAAK,OACL8D,QAAS,WACP/B,EAAQ,GACRE,GAAW,MAGbD,EACF,gBAACf,EAAD,CACEjB,KAAK,OACL8D,QAAS,WACP7B,GAAW,MAIf,gBAACjB,EAAD,CACEhB,KAAK,OACL8D,QAAS,WACP7B,GAAW,MAIjB,gBAACd,EAAD,CACEnB,KAAK,OACL8D,QAAS,WACHhC,EAAO,IACTC,EAAQD,EAAO,GAEjBG,GAAW,QCpHvB,IAAMiC,EAAchJ,oBAAH,iEAAGA,CAAH,6BAKXiJ,EAAoBjJ,oBAAH,uEAAGA,CAAH,4FAoBjBD,EAAYC,oBAAH,+DAAGA,CAAH,4DAMTkJ,EAAgBlJ,oBAAH,mEAAGA,CAAH,sGAWb8I,EAAO9I,kBAAH,0DAAGA,CAAH,iBAIJmJ,EAAUnJ,mBAAH,6DAAGA,CAAH,oFAQPE,EAAeF,oBAAH,kEAAGA,CAAH,gIAYZoJ,EAASpJ,uBAAH,4DAAGA,CAAH,gDAMNqJ,GAAWrJ,oBAAH,8DAAGA,CAAH,mEAORC,GAAQD,mBAAH,2DAAGA,CAAH,kCAII,SAASsJ,GAAT,GAWL,IAVRC,EAUQ,EAVRA,eACAC,EASQ,EATRA,kBACA3I,EAQQ,EARRA,YACAC,EAOQ,EAPRA,KAEA8F,GAKQ,EANR6C,QAMQ,EALR7C,MACAC,EAIQ,EAJRA,QACA1F,EAGQ,EAHRA,cACAuI,EAEQ,EAFRA,iBACApI,EACQ,EADRA,MACQ,GACgBqI,eAAS,GAA1B3I,EADC,KACK4I,EADL,QAGuBlI,gBAAWmI,KAAlCC,EAHA,EAGAA,QAASC,EAHT,EAGSA,UAHT,GAKsBJ,eAAS,GAAhC7C,EALC,KAKQC,EALR,QAOsB4C,cAASpC,MAAe,IAA/CyC,EAPC,KAOQC,EAPR,KAcF/I,EAAgB,SAAC,EAErBgJ,GACG,IACCC,EAHH5H,EAEE,KAFEG,EAEF,KAaH,YAbG,IADHwH,OAAiB,GAIjBF,EAAQrH,SAAQ,SAACyH,GACVF,GAAS3H,IAAO6H,EAAEC,SAAkB,IAAR9H,GAI/B6H,EAAEF,QACFC,GAAU,IAJVC,EAAE9G,OAAOf,GACT4H,GAAU,MAOVA,GACFT,EAAiB,CAACnH,EAAIG,KACf,IAEPgH,EAAiB,EAAE,EAAG,MACf,IAmBX,OAfA/H,gBAAU,WACR,GAAKmF,EAAL,CAIA,IAAMwD,EAAQC,aAAY,WACpB3D,EAAO,IACTC,EAAQD,EAAO,KAEhB,KACH,OAAO,kBAAM4D,cAAcF,OAC1B,CAACxD,EAASF,IAEbI,QAAQC,IAAI,QAAS3F,GAGnB,gBAAC,EAAD,KACE,gBAAC0H,EAAD,KACE,gBAACE,EAAD,KACE,gBAAC,EAAD,oLAKuB,IAAtB/H,EAAc,GACb,gBAAC,EAAD,kDAEA,gBAAC,GAAD,wBAAwBA,EAAc,KAG1C,gBAAC8H,EAAD,KACE,gBAACI,GAAD,KACE,4BACE,yBACEoB,KAAK,WACLlI,GAAG,aACHmI,SAAU,kBAAMd,GAAS5I,MAE3B,yBAAO2J,QAAQ,aAAavI,MAAO,CAAE,cAAe,WAApD,oBAKJ,gBAAC,EAAD,CACEwG,QAAS,WACP1H,EAAc,EAAE,EAAG,KACnB2F,EAAQ,GACRE,GAAW,KAJf,WAWJ,gBAACoC,EAAD,MACA,gBAAC,IAAD,KACE,gBAAC,EAAD,KACGY,EAAU1C,KAAI,SAAC5G,EAAO7B,GACrB,OACE,gBAAC,EAAD,CACEX,IAAKW,EACL6B,MAAOA,EACPE,kBAAmB4I,EACnB3I,eAAgB4I,EAChBrI,cAAeA,EACfD,cAAeA,EACfD,SAAU,SAACmJ,GAAD,OAhGP,SAACA,EAAYxL,GAC5BoL,EAAQpL,GAAKwL,EACbH,EAAWD,GA8F2B/I,CAASmJ,EAAGxL,IACtCkC,KAAMA,EACNJ,KAAMoJ,EAAUA,EAAQlL,GAAK,KAC7BmC,QAAS6F,EACT/F,YAAaA,EACbG,KAAMA,SAMfM,EAAQ,IACP,gBAAC,EAAD,CACEA,MAAOA,EACPsF,KAAMA,EACNC,QAASA,EACTC,QAASA,EACTC,WAAYA,IAGd,gBAACgC,EAAD,CACEnC,KAAMA,EACNC,QAASA,EACTC,QAASA,EACTC,WAAYA,IAGhB,gBAACoC,EAAD,O,eCrPAyB,GAAmB5K,oBAAH,+DAAGA,CAAH,mFAQhBD,GAAYC,oBAAH,wDAAGA,CAAH,iGAYT6K,GAAY7K,sBAAH,wDAAGA,CAAH,0CAKT8K,GAAQ9K,sBAAH,oDAAGA,CAAH,MAEL+K,GAAU/K,mBAAH,sDAAGA,CAAH,2BAET,YACA,OAD2C,EAAxCgL,UAEC,iGACA,QAIFC,GAAKjL,mBAAH,iDAAGA,CAAH,iFAMFkL,GAAQlL,mBAAH,oDAAGA,CAAH,8CACW,YAA0C,IAAvCmL,EAAuC,EAAvCA,UACrB,MAAkB,QAAdA,EACK,YACgB,SAAdA,EACF,YAEF,eAMLC,GAAOpL,mBAAH,mDAAGA,CAAH,MAEJqL,GAAQrL,sBAAH,oDAAGA,CAAH,oaACPoL,GAKAA,GAIIA,GAIJA,GAIAA,GAMAA,GAKAA,GAKAA,GAIAA,GAIAA,IAKEE,GAAatL,kBAAH,yDAAGA,CAAH,iCAKVuL,GAAYvL,kBAAH,yDAAGA,CAAH,iCAKTwL,GAAkBxL,oBAAH,+DAAGA,CAAH,+GAWfyL,GAASzL,oBAAH,sDAAGA,CAAH,wEAUN0L,GAAiB1L,kBAAH,8DAAGA,CAAH,iBAaL,SAAS2L,GAAT,GAA+C,IAA9BxK,EAA8B,EAA9BA,cAAeyF,EAAe,EAAfA,KAAe,GAC7BlF,gBAAWmI,KAAlCC,EADoD,EACpDA,QADoD,EAC3CC,UACjB,OACE,gBAACa,GAAD,KACE,gBAAC,GAAD,KACE,gBAACC,GAAD,KACE,gBAACC,GAAD,KACE,gBAACM,GAAD,KACE,gBAACL,GAAD,CAASC,WAAW,GAApB,eACA,gBAACD,GAAD,CAASa,QAAS,EAAGZ,WAAW,GAAhC,YAGA,gBAACD,GAAD,CAASa,QAAS,EAAGZ,WAAW,GAAhC,cAIF,gBAACI,GAAD,KACE,gBAACH,GAAD,KAAK9J,EAAc,IACnB,gBAAC8J,GAAD,CAAIW,QAAS,GAAb,WACA,gBAACX,GAAD,CAAIW,QAAS,GAAb,aACA,gBAACX,GAAD,CAAIW,QAAS,GAAb,UACA,gBAACX,GAAD,CAAIW,QAAS,GAAb,eAGJ,gBAACP,GAAD,KACE,gBAAC,MAAD,CACEQ,MAAK,aAcLC,OAAQ,YACN,OADoC,EAA3BC,UAAaC,MAEnBhI,QACC,SAACiI,GAAD,OACE3L,OAAO2L,EAAKrF,MAAQ,IAAMA,IAhD1BvG,EAiDa4L,EAAK5L,KAhD/BC,OAAOC,OAAOF,GAAMG,MAAM,GAAI,MAgDWW,EAAc,IAjD3C,IAACd,KAmDHgH,KAAI,WAA2BzI,GAAM,IAA9ByB,EAA8B,EAA9BA,KAAM6L,EAAwB,EAAxBA,GAAIC,EAAoB,EAApBA,GAAIC,EAAgB,EAAhBA,GAAIC,EAAY,EAAZA,GAClBC,EAAQxC,EAAQ,GAAGhC,MACvB,SAAClF,GAAD,OAAOA,EAAEvC,OAASC,OAAOD,MAErBkM,OAAkBjH,IAAVgH,EAAsBA,EAAME,IAAI5F,GAAQ,EAEhD6F,EAAQ3C,EAAQ,GAAGhC,MACvB,SAAClF,GAAD,OAAOA,EAAEvC,OAASC,OAAOD,MAErBqM,OAAkBpH,IAAVmH,EAAsBA,EAAMD,IAAI5F,GAAQ,EAEhD+F,EAAQ7C,EAAQ,GAAGhC,MACvB,SAAClF,GAAD,OAAOA,EAAEvC,OAASC,OAAOD,MAErBuM,OAAkBtH,IAAVqH,EAAsBA,EAAMH,IAAI5F,GAAQ,EAEhDiG,EAAQ/C,EAAQ,GAAGhC,MACvB,SAAClF,GAAD,OAAOA,EAAEvC,OAASC,OAAOD,MAErByM,OAAkBxH,IAAVuH,EAAsBA,EAAML,IAAI5F,GAAQ,EAEtD,OACE,gBAACwE,GAAD,CAAMnN,IAAKoC,GACT,gBAAC6K,GAAD,CAAOC,UAAU,QAEbtL,oCACE,gBAAG0C,EAAH,EAAGA,GAAH,OAAYjC,OAAOiC,KAAQjC,OAAOD,MAClCoC,WAAWC,MAGjB,gCACE,gBAACwI,GAAD,CACEC,UACY,IAAVoB,EACI,MACU,IAAVA,EACA,OACA,QAGLL,GAUH,gBAAChB,GAAD,CACEC,UACY,IAAVoB,EACI,MACU,IAAVA,EACA,OACA,UAIV,gCACE,gBAACrB,GAAD,CACEC,UACY,IAAVyB,EACI,MACU,IAAVA,EACA,OACA,QAGLtM,OAAO8L,GAAM,KAEhB,gBAAClB,GAAD,CACEC,UACY,IAAVyB,EACI,MACU,IAAVA,EACA,OACA,QAGC,IAANhO,EAAU,KAAO,KAGtB,gCACE,gBAACsM,GAAD,CACEC,UACY,IAAVuB,EACI,MACU,IAAVA,EACA,OACA,QAGLP,GAEH,gBAACjB,GAAD,CACEC,UACY,IAAVuB,EACI,MACU,IAAVA,EACA,OACA,QAGC,IAAN9N,EAAU,IAAM,KAGrB,gCACE,gBAACsM,GAAD,CACEC,UACY,IAAV2B,EACI,MACU,IAAVA,EACA,OACA,QAGLT,GAEH,gBAACnB,GAAD,CACEC,UACY,IAAV2B,EACI,MACU,IAAVA,EACA,OACA,QAGC,IAANlO,EAAU,IAAM,eAWvC,gBAAC4M,GAAD,KACE,gBAACE,GAAD,6CACA,gBAACD,GAAD,KACE,gBAACF,GAAD,iBACA,gBAACD,GAAD,qBC5UV,IAAMvL,GAAYC,oBAAH,+DAAGA,CAAH,uEAOTkJ,GAAgBlJ,oBAAH,mEAAGA,CAAH,uGAWbmJ,GAAUnJ,mBAAH,6DAAGA,CAAH,oFAOP8I,GAAO9I,kBAAH,0DAAGA,CAAH,iBASJa,GAAc,CAClBS,MAAOA,IACPC,OANa,IAObF,UANsC,CAACC,IAAeC,KAOtDH,MANgB,KAmGlB,GA1FkB,WAAM,OACsBuI,cAA2B,EACpE,EACD,KAFKJ,EADe,KACCC,EADD,QAMEG,cAA2B,CAAC,EAAG,KAAhD7I,EANe,KAMT2I,EANS,QAQEE,cAAS,GAA1B/C,EARe,KAQTC,EARS,QASoB8C,cAA2B,EAClE,EACD,KAFKxI,EATe,KASAuI,EATA,KAgBhBqD,GAAYtL,YAAO,MAhBH,GAiBIkI,cAAS,GAA5BrI,EAjBe,KAiBR0L,EAjBQ,KAyBtB,OANArL,gBAAU,WACR,IAAML,EAAQyL,EAAU/K,QAAQiL,wBAAwB3L,MACxD0L,EAAS1L,GACT0F,QAAQC,IAAI,gBAAiB3F,KAC5B,IAGD,gBAAC,IAAD,CAAM4L,aAAa,aACjB,gBAAC,GAAD,CAAWxJ,IAAKqJ,GACd,gBAAC,GAAD,KACE,sDACA,gBAAC,GAAD,oJAMF,gBAAC,GAAD,MAaA,gBAACzD,GAAD,CACEzI,YAAaA,GACb0I,eAAgBA,EAChBC,kBAAmBA,EACnB1I,KAAMA,EACN2I,QAASA,EACT7C,KAAMA,EACNC,QAASA,EACT1F,cAAeA,EACfuI,iBAAkBA,EAClBpI,MAAOA,KAcc,IAAtBH,EAAc,GACb,gCACE,gBAACwK,GAAD,CAAOxK,cAAeA,EAAeyF,KAAMA,KAG7C,gBAAC,GAAD,KACE,gBAAC,GAAD","file":"component---src-pages-animated-tsx-08da0dd26fde0796d40f.js","sourcesContent":["function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var objectWithoutPropertiesLoose = require(\"./objectWithoutPropertiesLoose.js\");\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutProperties;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","import React, { createContext } from \"react\";\n\nimport * as d3 from \"d3\";\nimport * as topojson from \"topojson\";\n\nimport countiesMap from \"us-atlas/counties-10m.json\";\n\nexport const MapsContext = createContext(null);\n\nexport const Maps = ({ children }) => {\n\n  const states = topojson.feature(countiesMap, countiesMap.objects.states).features\n  const counties = topojson.feature(countiesMap, countiesMap.objects.counties).features\n\n  return (\n    <MapsContext.Provider value={{ states, counties }}>\n      {children}\n    </MapsContext.Provider>\n  );\n};\n","import React, { useRef, useEffect, useState, useContext } from \"react\";\nimport styled from \"styled-components\";\n\nimport * as d3 from \"d3\";\nimport * as topojson from \"topojson\";\n\nimport Sparse from \"../../utility/sparse\";\nimport MapZoom from \"../../utility/mapZoom\";\n\nimport { MapsContext } from \"../../contexts/mapsContext\";\n\nimport countiesMap from \"us-atlas/counties-10m.json\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  flex-direction: column;\n  align-items: center;\n  margin: 10px 20px;\n\n  @media (max-width: 830px) {\n    margin: 10px 5px;\n  }\n  @media (max-width: 700px) {\n    margin: 0;\n  }\n`;\n\nconst Title = styled.h3`\n  margin: 0;\n`;\n\nconst MapContainer = styled.svg`\n  g {\n    background-color: light-gray;\n    fill: red; // sjakldjsakldjsakljdsklajdkl <----------------------------------\n  }\n  border: 1px solid\n    ${({ border }: { border: boolean }) => (border ? \"black\" : \"white\")};\n  // background-color: #f5f5f5;\n`;\n\ntype MapData = Array<Sparse>;\n\ntype MapSettings = {\n  width: number;\n  height: number;\n  translate: [number, number];\n  scale: number;\n};\n\ninterface Props {\n  title: string;\n  highlightedCounty: [number, string];\n  countySelector: ([s, s1]: [number, string]) => void;\n  data: MapData;\n  time: [number, number];\n  MapSettings: MapSettings;\n  weekNum: number;\n  past: boolean;\n  addState: (m: MapZoom) => void;\n  stateSelector: ([a, b]: [number, string]) => void;\n  selectedState: [number, string];\n}\n\nconst getStateFips = (fips: number): number => {\n  return Number(String(fips).slice(0, -3));\n};\nconst Map = ({\n  title,\n  highlightedCounty,\n  countySelector,\n  data,\n  time,\n  MapSettings,\n  weekNum,\n  past,\n  addState,\n  stateSelector,\n  selectedState,\n}: Props) => {\n  const { scale, translate, width, height } = MapSettings;\n\n  const d3Container = useRef(null);\n\n  const { counties, states } = useContext(MapsContext);\n  useEffect(() => {\n    const projection = d3.geoAlbers().scale(scale).translate(translate);\n    const map_path = d3.geoPath().projection(projection);\n\n    const map_g = d3\n      .select(d3Container.current)\n      .attr(\"width\", width)\n      .attr(\"height\", height)\n      .append(\"g\");\n\n    addState(new MapZoom(map_path, map_g, width, height, selectedState[0]));\n\n    // States:\n    map_g\n      .append(\"g\")\n      .style(\"stroke\", \"black\")\n      .style(\"stroke-width\", \"0.5px\")\n      .style(\"fill\", \"#ffffffff\")\n      .selectAll(\"path\")\n      .data(states)\n      .enter()\n      .append(\"path\")\n      .attr(\"d\", map_path as any)\n      .attr(\"stateFips\", ({ id }) => Number(id));\n\n    // Counties:\n    map_g\n      .append(\"g\")\n      .selectAll(\"path\")\n      .data(counties)\n      .enter()\n      .append(\"path\")\n      .attr(\"d\", map_path as any)\n      .attr(\"stateName\", ({ id }) => {\n        return countiesMap.objects.states.geometries.find((val) => {\n          return getStateFips(id) === Number(val.id);\n        }).properties.name;\n      })\n      .attr(\"id\", ({ id }) => `c${Number(id)}`)\n      //   .attr(\"countyName\", ({ properties: { name } }) => name)\n      .attr(\"class\", \"cboundary\")\n      .style(\"fill\", \"#00000000\");\n    // .style(\"stroke-width\", 0)\n    // .style(\"stroke\", \"#FFFFFF00\")\n  }, []);\n\n  useEffect(() => {\n    data.forEach((d) => {\n      const { curr, last, weeks } = d.getLast(weekNum);\n\n      let col = \"#00000000\",\n        opac = 1;\n\n      if (!past && curr !== 0) {\n        col = curr === 1 ? \"#fa5a50\" : \"#5768ac\";\n      } else if (past) {\n        col = (curr !== 0 && curr === 1) || last === 1 ? \"#fa5a50\" : \"#5768ac\";\n\n        // this is just the last week number, not number since last weeks so we can change calculation back\n        opac = curr\n          ? 1\n          : ((weekNum - weeks + 1) / (weekNum + 1)) * Number(last !== -1);\n      }\n\n      // Reduce opacity for states taht aren't selected\n      opac *= Math.pow(\n        1 / 4,\n        1 -\n          Number(\n            getStateFips(d.fips) === selectedState[0] || selectedState[0] === -1\n          )\n      );\n\n      const sel = d3.select(d3Container.current).select(`#c${d.fips}`);\n      sel.style(\"fill\", col);\n      sel.style(\"fill-opacity\", opac);\n    });\n  }, [weekNum, past, selectedState]);\n\n  useEffect(() => {\n    d3.select(d3Container.current)\n      .selectAll(\".cboundary\")\n      .on(\"click\", function ({ currentTarget }, { id }) {\n        stateSelector([\n          getStateFips(id),\n          currentTarget.getAttribute(\"stateName\"),\n        ]);\n      });\n    // .style(\"fill-opacity\", function( { id }){\n    //   return getStateFips(id) === selectedState[0] || selectedState[0] === -1 ? \"1\" : \"0.3\"\n    // })\n  }, [selectedState]);\n\n  return (\n    <Container>\n      <Title>{title}</Title>\n      <MapContainer ref={d3Container} border={selectedState[0] !== -1} />\n    </Container>\n  );\n};\n\nexport default Map;\n","import _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport validProp from '@emotion/is-prop-valid';\n\nfunction isValidProp(key) {\n  return validProp(key);\n}\n\nfunction filterSVGProps(props) {\n  return Object.keys(props).reduce(function (p, k) {\n    if (isValidProp(k)) {\n      // hack to satisfy TypeScript complexity\n      ;\n      p[k] = props[k];\n    }\n\n    return p;\n  }, {});\n}\n\nvar StyledIconBaseBase = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var children = props.children,\n      iconAttrs = props.iconAttrs,\n      iconVerticalAlign = props.iconVerticalAlign,\n      iconViewBox = props.iconViewBox,\n      size = props.size,\n      title = props.title,\n      otherProps = _objectWithoutProperties(props, [\"children\", \"iconAttrs\", \"iconVerticalAlign\", \"iconViewBox\", \"size\", \"title\"]);\n\n  var iconProps = _objectSpread({\n    viewBox: iconViewBox,\n    height: props.height !== undefined ? props.height : size,\n    width: props.width !== undefined ? props.width : size,\n    'aria-hidden': title == null ? 'true' : undefined,\n    focusable: 'false',\n    role: title != null ? 'img' : undefined\n  }, iconAttrs);\n\n  var svgProps = filterSVGProps(otherProps);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({}, iconProps, svgProps, {\n    ref: ref\n  }), title && /*#__PURE__*/React.createElement(\"title\", {\n    key: \"icon-title\"\n  }, title), children);\n});\nexport var StyledIconBase = /*#__PURE__*/styled(StyledIconBaseBase).withConfig({\n  displayName: \"StyledIconBase\",\n  componentId: \"ea9ulj-0\"\n})([\"display:inline-block;vertical-align:\", \";overflow:hidden;\"], function (props) {\n  return props.iconVerticalAlign;\n});","import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { StyledIconBase } from '@styled-icons/styled-icon';\nexport var PlayCircleFill = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"currentColor\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\"\n  };\n  return /*#__PURE__*/React.createElement(StyledIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 16 16\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z\"\n  }));\n});\nPlayCircleFill.displayName = 'PlayCircleFill';\nexport var PlayCircleFillDimensions = {\n  height: 16,\n  width: 16\n};","import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { StyledIconBase } from '@styled-icons/styled-icon';\nexport var PauseCircleFill = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"currentColor\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\"\n  };\n  return /*#__PURE__*/React.createElement(StyledIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 16 16\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z\"\n  }));\n});\nPauseCircleFill.displayName = 'PauseCircleFill';\nexport var PauseCircleFillDimensions = {\n  height: 16,\n  width: 16\n};","import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { StyledIconBase } from '@styled-icons/styled-icon';\nexport var SkipPreviousCircle = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"currentColor\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\"\n  };\n  return /*#__PURE__*/React.createElement(StyledIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 24 24\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10c5.515 0 10-4.486 10-10S17.515 2 12 2zm4 14l-6-4v4H8V8h2v4l6-4v8z\"\n  }));\n});\nSkipPreviousCircle.displayName = 'SkipPreviousCircle';\nexport var SkipPreviousCircleDimensions = {\n  height: 24,\n  width: 24\n};","import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { StyledIconBase } from '@styled-icons/styled-icon';\nexport var SkipNextCircle = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"currentColor\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\"\n  };\n  return /*#__PURE__*/React.createElement(StyledIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 24 24\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm4 14h-2v-4l-6 4V8l6 4V8h2v8z\"\n  }));\n});\nSkipNextCircle.displayName = 'SkipNextCircle';\nexport var SkipNextCircleDimensions = {\n  height: 24,\n  width: 24\n};","import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { StyledIconBase } from '@styled-icons/styled-icon';\nexport var Restart = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"currentColor\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\"\n  };\n  return /*#__PURE__*/React.createElement(StyledIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 24 24\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"none\",\n    d: \"M0 0h24v24H0z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm4.82-4.924a7 7 0 10-1.852 1.266l-.975-1.755A5 5 0 1117 12h-3l2.82 5.076z\"\n  }));\n});\nRestart.displayName = 'Restart';\nexport var RestartDimensions = {\n  height: 24,\n  width: 24\n};","import React, { useContext, useEffect, useRef, useState } from \"react\";\nimport styled from \"styled-components\";\n\nimport * as d3 from \"d3\";\n\nimport { DatesContext } from \"../../contexts/datesContext\";\n\nimport { PlayCircleFill } from \"@styled-icons/bootstrap/PlayCircleFill\";\nimport { PauseCircleFill } from \"@styled-icons/bootstrap/PauseCircleFill\";\nimport { SkipPreviousCircle } from \"@styled-icons/boxicons-solid/SkipPreviousCircle\";\nimport { SkipNextCircle } from \"@styled-icons/boxicons-solid/SkipNextCircle\";\nimport { Restart } from \"@styled-icons/remix-fill/Restart\";\n\nconst Container = styled.div`\n  width: 760px;\n  height: 150px;\n`;\n\nconst Slider = styled.svg`\n  width: 760px;\n  height: 100px;\n`;\n\nconst ButtonArea = styled.div`\n  display: flex;\n  width: 100%;\n  justify-content: center;\n\n  * {\n    margin: 5px 10px;\n  }\n\n  & > *:hover {\n    cursor: pointer;\n  }\n`;\n\nconst Button = styled.button`\n  border-radius: 10px;\n`;\n\ntype Props = {\n  week: number;\n  setWeek: (number) => void;\n  playing: boolean;\n  setPlaying: (b: boolean) => void;\n  width: number;\n};\n\nconst convertDate = (d: string): Date => {\n  return new Date(`${d} PST`);\n};\n\nconst nextDate = (initial: Date, n: number) => {\n  // return new Date(\n  //   initial.getFullYear(),\n  //   initial.getMonth(),\n  //   initial.getDate() + n\n  // );\n\n  return new Date(initial.getTime() + 24 * 60 * 60 * 1000 * n);\n};\n\nconst TimeLine = ({ week, setWeek, playing, setPlaying, width }: Props) => {\n  console.log(width)\n\n  const months = [\n    \"Jan\",\n    \"Feb\",\n    \"Mar\",\n    \"Apr\",\n    \"May\",\n    \"Jun\",\n    \"Jul\",\n    \"Aug\",\n    \"Sep\",\n    \"Oct\",\n    \"Nov\",\n    \"Dec\",\n  ];\n\n  const dates = useContext(DatesContext).map((d) => convertDate(d));\n\n  // 2020 was a leap year...\n  const labels = [...Array(365).keys()]\n    .map((i) => {\n      return { d: nextDate(dates[0], i), i };\n    })\n    .filter(({ d }) => {\n      return d.getDate() === 1;\n    });\n\n  const d3Container = useRef(null);\n\n  const x = d3\n    .scaleTime()\n    .domain([dates[0], dates[dates.length - 1]])\n    .range([0, 600])\n    .clamp(true);\n\n  const update = (val: Date | number) => {\n    let i: number;\n\n    if (val instanceof Date) {\n      i = [...Array(dates.length).keys()].find((i) => {\n        return (\n          dates[i] > val ||\n          i === dates.length - 1 ||\n          (dates[i] >= val && i === 0)\n        );\n      });\n      setWeek(i);\n    } else {\n      i = val;\n    }\n\n    const newDate = dates[i];\n    const endDate =\n      i + 1 < dates.length\n        ? nextDate(dates[i + 1], -1)\n        : convertDate(\"2020-12-27\");\n\n    d3.select(d3Container.current).select(\"#handle\").attr(\"cx\", x(newDate));\n    d3.select(d3Container.current)\n      .select(\"#label\")\n      .attr(\"x\", x(newDate))\n      .text(\n        `${newDate.getMonth() + 1}/${newDate.getDate()} - ${\n          endDate.getMonth() + 1\n        }/${endDate.getDate()}`\n      );\n  };\n\n  useEffect(() => {\n    const svg = d3\n      .select(d3Container.current)\n      .append(\"svg\")\n      .attr(\"width\", 760)\n      .attr(\"height\", 100);\n\n    const slider = svg\n      .append(\"g\")\n      .attr(\"transform\", \"translate(80, 50)\")\n      .attr(\"id\", \"slider\");\n\n    slider\n      .insert(\"g\")\n      .selectAll(\"text\")\n      .data(labels)\n      .enter()\n      .append(\"text\")\n      .attr(\"x\", ({ d }) => x(d))\n      .attr(\"y\", 30)\n      .attr(\"text-anchor\", \"middle\")\n      .text(({ d }) => months[d.getMonth()]);\n\n    slider.append(\"g\").attr(\"id\", \"eventTitles\");\n    slider.append(\"g\").attr(\"id\", \"eventConnectors\");\n\n    slider\n      .append(\"text\")\n      .attr(\"x\", x(x.invert(600)))\n      .attr(\"y\", 30)\n      .text(\"2020\");\n\n    slider.append(\"text\").attr(\"x\", -75).attr(\"y\", 0).text(\"Week\");\n\n    slider\n      .append(\"text\")\n      .attr(\"x\", -55)\n      .attr(\"y\", 15)\n      .attr(\"id\", \"weekCounter\")\n      .text(\"0/52\")\n      .attr(\"text-anchor\", \"middle\");\n\n    const handle = slider.insert(\"circle\").attr(\"id\", \"handle\").attr(\"r\", 9);\n\n    const label = slider\n      .append(\"text\")\n      .attr(\"id\", \"label\")\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"transform\", \"translate(0,-20)\");\n\n    slider\n      .append(\"line\")\n      .attr(\"stroke\", \"black\")\n      .attr(\"stroke-width\", \"10px\")\n      .attr(\"stroke-opacity\", 0.3)\n      .attr(\"stroke-linecap\", \"round\")\n      .attr(\"x1\", x.range()[0])\n      .attr(\"x2\", x.range()[1])\n      .select(function () {\n        return this.parentNode.appendChild(this.cloneNode(true));\n      })\n      .attr(\"stroke-width\", \"100px\") // want this to overlap the text\n      .attr(\"stroke\", \"transparent\")\n      .call(\n        d3\n          .drag()\n          .on(\"start.interrupt\", () => slider.interrupt())\n          .on(\"start drag\", (event) => {\n            setPlaying(false);\n            update(x.invert(event.x));\n          })\n      );\n  }, [width]);\n\n  useEffect(() => {\n    update(week);\n    d3.select(d3Container.current)\n      .select(\"#weekCounter\")\n      .text(`${week + 1}/52`);\n  }, [week, width]);\n\n  return (\n    <Container>\n      <Slider ref={d3Container} />\n      <ButtonArea>\n        <SkipPreviousCircle\n          size=\"30px\"\n          onClick={() => {\n            if (week > 0) {\n              setWeek(week - 1);\n            }\n            setPlaying(false);\n          }}\n        />\n        {week === 51 ? (\n          <Restart\n            size=\"30px\"\n            onClick={() => {\n              setWeek(0);\n              setPlaying(false);\n            }}\n          />\n        ) : playing ? (\n          <PauseCircleFill\n            size=\"30px\"\n            onClick={() => {\n              setPlaying(false);\n            }}\n          />\n        ) : (\n          <PlayCircleFill\n            size=\"30px\"\n            onClick={() => {\n              setPlaying(true);\n            }}\n          />\n        )}\n        <SkipNextCircle\n          size=\"30px\"\n          onClick={() => {\n            if (week < 51) {\n              setWeek(week + 1);\n            }\n            setPlaying(false);\n          }}\n        />\n      </ButtonArea>\n    </Container>\n  );\n};\n\nexport default TimeLine;\n","import React, { useContext, useEffect, useRef, useState } from \"react\";\nimport styled from \"styled-components\";\n\nimport * as d3 from \"d3\";\n\nimport { DatesContext } from \"../../contexts/datesContext\";\n\nimport { PlayCircleFill } from \"@styled-icons/bootstrap/PlayCircleFill\";\nimport { PauseCircleFill } from \"@styled-icons/bootstrap/PauseCircleFill\";\nimport { SkipPreviousCircle } from \"@styled-icons/boxicons-solid/SkipPreviousCircle\";\nimport { SkipNextCircle } from \"@styled-icons/boxicons-solid/SkipNextCircle\";\nimport { Restart } from \"@styled-icons/remix-fill/Restart\";\n\nconst Container = styled.div`\n  width: 100%;\n`;\n\nconst ButtonArea = styled.div`\n  display: flex;\n  width: 100%;\n  justify-content: center;\n\n  * {\n    margin: 5px 10px;\n  }\n\n  & > *:hover {\n    cursor: pointer;\n  }\n`;\n\nconst Button = styled.button`\n  border-radius: 10px;\n`;\n\ntype Props = {\n  week: number;\n  setWeek: (number) => void;\n  playing: boolean;\n  setPlaying: (b: boolean) => void;\n};\n\nconst convertDate = (d: string): Date => {\n  return new Date(`${d} PST`);\n};\n\nconst nextDate = (initial: Date, n: number) => {\n  // return new Date(\n  //   initial.getFullYear(),\n  //   initial.getMonth(),\n  //   initial.getDate() + n\n  // );\n\n  return new Date(initial.getTime() + 24 * 60 * 60 * 1000 * n);\n};\n\nconst TextArea = styled.div`\n  display: flex;\n  width: 100%;\n  flex-direction: column;\n  align-items: center;\n  margin: 5px 0;\n`;\n\nconst Text = styled.p`\n  margin: 5px 0;\n`;\n\nexport default function Controls({\n  week,\n  setWeek,\n  playing,\n  setPlaying,\n}: Props) {\n  const months = [\n    \"Jan\",\n    \"Feb\",\n    \"Mar\",\n    \"Apr\",\n    \"May\",\n    \"Jun\",\n    \"Jul\",\n    \"Aug\",\n    \"Sep\",\n    \"Oct\",\n    \"Nov\",\n    \"Dec\",\n  ];\n\n  const dates = useContext(DatesContext).map((d) => convertDate(d));\n\n  const newDate = dates[week];\n  const endDate =\n  week + 1 < dates.length\n      ? nextDate(dates[week + 1], -1)\n      : convertDate(\"2020-12-27\");\n  return (\n    <Container>\n      <TextArea>\n        <Text>Week {week + 1}/52</Text>\n        <Text>\n          {months[newDate.getMonth()]} {newDate.getDate()} - {months[endDate.getMonth()]} {endDate.getDate()}\n        </Text>\n      </TextArea>\n      <ButtonArea>\n        <SkipPreviousCircle\n          size=\"30px\"\n          onClick={() => {\n            if (week > 0) {\n              setWeek(week - 1);\n            }\n            setPlaying(false);\n          }}\n        />\n        {week === 51 ? (\n          <Restart\n            size=\"30px\"\n            onClick={() => {\n              setWeek(0);\n              setPlaying(false);\n            }}\n          />\n        ) : playing ? (\n          <PauseCircleFill\n            size=\"30px\"\n            onClick={() => {\n              setPlaying(false);\n            }}\n          />\n        ) : (\n          <PlayCircleFill\n            size=\"30px\"\n            onClick={() => {\n              setPlaying(true);\n            }}\n          />\n        )}\n        <SkipNextCircle\n          size=\"30px\"\n          onClick={() => {\n            if (week < 51) {\n              setWeek(week + 1);\n            }\n            setPlaying(false);\n          }}\n        />\n      </ButtonArea>\n    </Container>\n  );\n}\n","import React, { useEffect, useContext, useState, useRef } from \"react\";\nimport styled from \"styled-components\";\n\nimport * as d3 from \"d3\";\n\nimport counties from \"us-atlas/counties-10m.json\";\n\nimport { LisaContext } from \"../../contexts/lisaContext\";\nimport { Maps } from \"../../contexts/mapsContext\";\n\nimport Sparse from \"../../utility/sparse\";\nimport Map2 from \"./map2\";\nimport TimeLine from \"./timeline\";\nimport TimeLineOld from \"./timelineOld\";\nimport MapZoom from \"../../utility/mapZoom\";\n\nimport Controls from \"./controls\";\n\ntype Data = Array<Sparse>;\n\ntype MapSettings = {\n  width: number;\n  height: number;\n  translate: [number, number];\n  scale: number;\n};\n\nconst ControlArea = styled.div`\n  display: flex;\n  width: 98%;\n`;\n\nconst ControlsContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: flex-end;\n`;\n\ntype Props = {\n  selectedCounty: [number, string];\n  setSelectedCounty: ([s1, s2]: [number, string]) => void;\n  MapSettings: MapSettings;\n  time: [number, number];\n  setTime: ([n1, n2]: [number, number]) => void;\n  week: number;\n  setWeek: (n: number) => void;\n  selectedState: [number, string];\n  setSelectedState: ([a, b]: [number, string]) => void;\n  width: number;\n};\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n\nconst TextContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: start;\n  width: 98%;\n\n  & > h1 {\n    margin: 5px 5px 0 5px;\n  }\n`;\n\nconst Text = styled.p`\n  margin: 5px;\n`;\n\nconst Divider = styled.hr`\n  width: 98%;\n  height: 1px;\n  background-color: black;\n  border-radius: 1px;\n  margin: 5px 10px;\n`;\n\nconst MapContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n\n  width: 100%;\n  flex-wrap: wrap;\n\n  @media (max-width: 770px) {\n    flex-wrap: wrap;\n  }\n`;\nconst Button = styled.button`\n  border-radius: 10px;\n  height: 30px;\n  width: 60px;\n`;\n\nconst CheckBox = styled.div`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n  width: 140px;\n`;\n\nconst Title = styled.h3`\n  margin: 0;\n  white-space: nowrap;\n`;\nexport default function MapView({\n  selectedCounty,\n  setSelectedCounty,\n  MapSettings,\n  time,\n  setTime,\n  week,\n  setWeek,\n  selectedState,\n  setSelectedState,\n  width,\n}: Props) {\n  const [past, setPast] = useState(false);\n\n  const { mapData, mapTitles } = useContext(LisaContext);\n\n  const [playing, setPlaying] = useState(false);\n\n  const [mapZoom, setMapZoom] = useState(Array<MapZoom>(4));\n\n  const addState = (m: MapZoom, i) => {\n    mapZoom[i] = m;\n    setMapZoom(mapZoom);\n  };\n\n  const stateSelector = (\n    [id, name]: [number, string],\n    reset: boolean = false\n  ) => {\n    let zooming: boolean;\n\n    mapZoom.forEach((m) => {\n      if (!reset && id !== m.currId && id !== -1) {\n        m.select(id);\n        zooming = true;\n      } else {\n        m.reset();\n        zooming = false;\n      }\n    });\n\n    if (zooming) {\n      setSelectedState([id, name]);\n      return true;\n    } else {\n      setSelectedState([-1, \"\"]);\n      return false;\n    }\n  };\n\n  useEffect(() => {\n    if (!playing) {\n      return;\n    }\n\n    const timer = setInterval(() => {\n      if (week < 51) {\n        setWeek(week + 1);\n      }\n    }, 500);\n    return () => clearInterval(timer);\n  }, [playing, week]);\n\n  console.log(\"WIDTH\", width);\n\n  return (\n    <Container>\n      <ControlArea>\n        <TextContainer>\n          <Text>\n            Selecting the cumulative option also includes past values. This view\n            shows the the last time a county was a hot or cold spot by making\n            more distant times a lighter color.\n          </Text>\n          {selectedState[0] === -1 ? (\n            <Text>Click on a state to zoom into that state.</Text>\n          ) : (\n            <Title>Selected State: {selectedState[1]}</Title>\n          )}\n        </TextContainer>\n        <ControlsContainer>\n          <CheckBox>\n            <form>\n              <input\n                type=\"checkbox\"\n                id=\"Cumulative\"\n                onChange={() => setPast(!past)}\n              ></input>\n              <label htmlFor=\"Cumulative\" style={{ \"white-space\": \"nowrap\" }}>\n                Cumulative Map\n              </label>\n            </form>\n          </CheckBox>\n          <Button\n            onClick={() => {\n              stateSelector([-1, \"\"]);\n              setWeek(0);\n              setPlaying(false);\n            }}\n          >\n            Reset\n          </Button>\n        </ControlsContainer>\n      </ControlArea>\n      <Divider />\n      <Maps>\n        <MapContainer>\n          {mapTitles.map((title, i) => {\n            return (\n              <Map2\n                key={i}\n                title={title}\n                highlightedCounty={selectedCounty}\n                countySelector={setSelectedCounty}\n                selectedState={selectedState}\n                stateSelector={stateSelector}\n                addState={(m: MapZoom) => addState(m, i)}\n                time={time}\n                data={mapData ? mapData[i] : null}\n                weekNum={week}\n                MapSettings={MapSettings}\n                past={past}\n              />\n            );\n          })}\n        </MapContainer>\n      </Maps>\n      {width > 750 ? (\n        <TimeLineOld\n          width={width}\n          week={week}\n          setWeek={setWeek}\n          playing={playing}\n          setPlaying={setPlaying}\n        />\n      ) : (\n        <Controls\n          week={week}\n          setWeek={setWeek}\n          playing={playing}\n          setPlaying={setPlaying}\n        />\n      )}\n      <Divider />\n    </Container>\n  );\n}\n","import React, { useContext } from \"react\";\nimport styled from \"styled-components\";\nimport { LisaContext } from \"../../contexts/lisaContext\";\n\nimport { graphql, StaticQuery } from \"gatsby\";\nimport counties from \"us-atlas/counties-10m.json\";\nimport { rgb } from \"d3-color\";\n\nconst OutsideContainer = styled.div`\n  height: 100%;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n`;\n\nconst Container = styled.div`\n  display: block;\n  height: 100%;\n  overflow-x: auto;\n\n  width: 800px;\n\n  @media (max-width: 800px) {\n    width: 100%;\n  }\n`;\n\nconst MainTable = styled.table`\n  border-collapse: collapse;\n  width: 100%;\n`;\n\nconst THead = styled.thead``;\n\nconst THGroup = styled.th`\n  text-align: center;\n  ${({ underLine }: { underLine: boolean }) => {\n    return underLine\n      ? \"border-bottom: 1px solid black; border-left: 20px solid white; border-right: 20px solid white;\"\n      : null;\n  }}\n`;\n\nconst TH = styled.th`\n  min-width: 100px !important;\n  text-align: center;\n  border-bottom: 1px solid black;\n`;\n\nconst TData = styled.td`\n  background-color: ${({ highlight }: { highlight: string }) => {\n    if (highlight === \"hot\") {\n      return \"#fa5a50AA\";\n    } else if (highlight === \"cold\") {\n      return \"#5768acAA\";\n    }\n    return \"#FFFFFF00\";\n  }};\n  padding: 0;\n  margin: 0;\n`;\n\nconst TRow = styled.tr``;\n\nconst TBody = styled.tbody`\n  ${TRow} > *:nth-child(2n+1) {\n    width: 10px;\n    padding: 2px;\n  }\n\n  ${TRow} > * {\n    text-align: right;\n  }\n\n  & > ${TRow}:hover {\n    background-color: #d3d3d3;\n  }\n\n  ${TRow} > *:nth-child(2n) {\n    width: 100px;\n  }\n\n  ${TRow} > *:nth-child(1) {\n    width: 130px;\n    text-align: left;\n    border-right: 1px solid black;\n  }\n\n  ${TRow} > *:nth-child(3) {\n    // secondary line\n    // border-right: 1px solid lightgray;\n  }\n\n  ${TRow} > *:nth-child(7) {\n    // secondary line\n    // border-right: 1px solid lightgray;\n  }\n\n  ${TRow} > *:nth-child(5) {\n    border-right: 1px solid black;\n  }\n\n  ${TRow} {\n    border-bottom: 1px solid rgb(205, 205, 205);\n  }\n\n  ${TRow}:last-child {\n    border-bottom: 1px solid black;\n  }\n`;\n\nconst ColdLegend = styled.p`\n  //  background-color: rgba(0, 0, 255, 0.4);\n  background-color: #5768acaa;\n`;\n\nconst HotLegend = styled.p`\n  //  background-color: rgba(255, 0, 0, 0.4);\n  background-color: #fa5a50aa;\n`;\n\nconst LegendContainer = styled.div`\n  display: flex;\n  width: 800px;\n  margin: 5px 0;\n\n  @media (max-width: 800px) {\n    width: 100%;\n  }\n  justify-content: space-between;\n`;\n\nconst Legend = styled.div`\n  display: flex;\n  align-items: flex-start;\n\n  & > * {\n    margin: 5px;\n    padding: 5px;\n  }\n`;\n\nconst LegendAsterisk = styled.p`\n  margin: 5px;\n`;\n\ntype Props = {\n  selectedState: [number, string];\n  week: number;\n};\n\nconst getStateFips = (fips: number): number => {\n  return Number(String(fips).slice(0, -3));\n};\n\nexport default function Table({ selectedState, week }: Props) {\n  const { mapData, mapTitles } = useContext(LisaContext);\n  return (\n    <OutsideContainer>\n      <Container>\n        <MainTable>\n          <THead>\n            <TRow>\n              <THGroup underLine={false}>Counties of</THGroup>\n              <THGroup colSpan={4} underLine={true}>\n                Mobility\n              </THGroup>\n              <THGroup colSpan={4} underLine={true}>\n                Sheltered\n              </THGroup>\n            </TRow>\n            <TRow>\n              <TH>{selectedState[1]}</TH>\n              <TH colSpan={2}>Cuebiq*</TH>\n              <TH colSpan={2}>SafeGraph</TH>\n              <TH colSpan={2}>Cuebiq</TH>\n              <TH colSpan={2}>SafeGraph</TH>\n            </TRow>\n          </THead>\n          <TBody>\n            <StaticQuery\n              query={graphql`\n                {\n                  allRawCsv {\n                    nodes {\n                      cm\n                      cs\n                      fips\n                      sm\n                      ss\n                      week\n                    }\n                  }\n                }\n              `}\n              render={({ allRawCsv: { nodes } }) => {\n                return nodes\n                  .filter(\n                    (node) =>\n                      Number(node.week) - 1 === week &&\n                      getStateFips(node.fips) === selectedState[0]\n                  )\n                  .map(({ fips, cm, cs, sm, ss }, i) => {\n                    const cmVec = mapData[0].find(\n                      (d) => d.fips === Number(fips)\n                    );\n                    const cmVal = cmVec !== undefined ? cmVec.get(week) : 0;\n\n                    const csVec = mapData[1].find(\n                      (d) => d.fips === Number(fips)\n                    );\n                    const csVal = csVec !== undefined ? csVec.get(week) : 0;\n\n                    const smVec = mapData[2].find(\n                      (d) => d.fips === Number(fips)\n                    );\n                    const smVal = smVec !== undefined ? smVec.get(week) : 0;\n\n                    const ssVec = mapData[3].find(\n                      (d) => d.fips === Number(fips)\n                    );\n                    const ssVal = ssVec !== undefined ? ssVec.get(week) : 0;\n\n                    return (\n                      <TRow key={fips}>\n                        <TData highlight=\"none\">\n                          {\n                            counties.objects.counties.geometries.find(\n                              ({ id }) => Number(id) === Number(fips)\n                            ).properties.name\n                          }\n                        </TData>\n                        <>\n                          <TData\n                            highlight={\n                              cmVal === 1\n                                ? \"hot\"\n                                : cmVal === 2\n                                ? \"cold\"\n                                : \"none\"\n                            }\n                          >\n                            {cm}\n                            {/*\n                          \n                          UGHHHHHHHHHH neither seems to work ??? \n\n                          https://help.cuebiq.com/hc/en-us/articles/360041285051-Cuebiq-s-COVID-19-Mobility-Index-CMI-#:~:text=Cuebiq's%20Mobility%20Index%20Analysis%20is,movement%20within%20respective%20geographical%20areas. \n                          */}\n                            {/*Math.round(cm * Math.pow(10, Math.floor(cm)) / 1000)*/}\n                            {/*Math.round((Math.pow(10, cm) - 1) / 1000)*/}\n                          </TData>\n                          <TData\n                            highlight={\n                              cmVal === 1\n                                ? \"hot\"\n                                : cmVal === 2\n                                ? \"cold\"\n                                : \"none\"\n                            }\n                          ></TData>\n                        </>\n                        <>\n                          <TData\n                            highlight={\n                              smVal === 1\n                                ? \"hot\"\n                                : smVal === 2\n                                ? \"cold\"\n                                : \"none\"\n                            }\n                          >\n                            {Number(sm) / 1000}\n                          </TData>\n                          <TData\n                            highlight={\n                              smVal === 1\n                                ? \"hot\"\n                                : smVal === 2\n                                ? \"cold\"\n                                : \"none\"\n                            }\n                          >\n                            {i === 0 ? \"km\" : \"\"}\n                          </TData>\n                        </>\n                        <>\n                          <TData\n                            highlight={\n                              csVal === 1\n                                ? \"hot\"\n                                : csVal === 2\n                                ? \"cold\"\n                                : \"none\"\n                            }\n                          >\n                            {cs}\n                          </TData>\n                          <TData\n                            highlight={\n                              csVal === 1\n                                ? \"hot\"\n                                : csVal === 2\n                                ? \"cold\"\n                                : \"none\"\n                            }\n                          >\n                            {i === 0 ? \"%\" : \"\"}\n                          </TData>\n                        </>\n                        <>\n                          <TData\n                            highlight={\n                              ssVal === 1\n                                ? \"hot\"\n                                : ssVal === 2\n                                ? \"cold\"\n                                : \"none\"\n                            }\n                          >\n                            {ss}\n                          </TData>\n                          <TData\n                            highlight={\n                              ssVal === 1\n                                ? \"hot\"\n                                : ssVal === 2\n                                ? \"cold\"\n                                : \"none\"\n                            }\n                          >\n                            {i === 0 ? \"%\" : \"\"}\n                          </TData>\n                        </>\n                      </TRow>\n                    );\n                  });\n              }}\n            />\n          </TBody>\n        </MainTable>\n      </Container>\n      <LegendContainer>\n        <LegendAsterisk>* Cuebiq mobility value is an index.</LegendAsterisk>\n        <Legend>\n          <HotLegend>Hot Spot</HotLegend>\n          <ColdLegend>Cold Spot</ColdLegend>\n        </Legend>\n      </LegendContainer>\n    </OutsideContainer>\n  );\n}\n","import React, { useState, useRef, useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { Link } from \"gatsby\";\n\nimport Page from \"../components/page\";\nimport MapView from \"../components/bivar/mapView\";\nimport MapView1 from \"../components/bivar/mapView1\";\nimport MapView2 from \"../components/bivar/mapView2\";\nimport Table from \"../components/bivar/table\";\n\nimport Sparse from \"../utility/sparse\";\nimport MapZoom from \"../utility/mapZoom\";\n\nimport CreateMap from \"../components/bivar/createMap\";\n\nconst Container = styled.div`\n  width: 100%;\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n`;\n\nconst TextContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: start;\n  width: 100%;\n\n  & > h1 {\n    margin: 5px 5px 0 5px;\n  }\n`;\n\nconst Divider = styled.hr`\n  width: 98%;\n  height: 1px;\n  background-color: black;\n  border-radius: 1px;\n  margin: 5px 10px;\n`;\nconst Text = styled.p`\n  margin: 5px;\n`;\n\nconst width = 380;\nconst height = 250;\nconst mapsTranslate: [number, number] = [width / 2 - 5, height / 2];\nconst mapsScale = 500;\n\nconst MapSettings = {\n  width: width - 10,\n  height,\n  translate: mapsTranslate,\n  scale: mapsScale,\n};\n\nconst Bivariate = () => {\n  const [selectedCounty, setSelectedCounty] = useState<[number, string]>([\n    -1,\n    \"\",\n  ]);\n\n  const [time, setTime] = useState<[number, number]>([0, 52]);\n\n  const [week, setWeek] = useState(0);\n  const [selectedState, setSelectedState] = useState<[number, string]>([\n    -1,\n    \"\",\n  ]);\n\n  // const [MapCreator, _] = useState(new CreateMap());\n\n  const container = useRef(null);\n  const [width, setWidth] = useState(0);\n\n  useEffect(() => {\n    const width = container.current.getBoundingClientRect().width;\n    setWidth(width);\n    console.log(\"SETTING WIDTH\", width);\n  }, []);\n\n  return (\n    <Page selectedPage=\"Animation\">\n      <Container ref={container}>\n        <TextContainer>\n          <h1>Animated Choropleth Maps</h1>\n          <Text>\n            These maps show which counties were hot spots (colored red) and cold\n            spots (colored blue) during the specified week on the timeline\n            below.\n          </Text>\n        </TextContainer>\n        <Divider />\n        {/*<p>Week of {dates[week]}</p>*/}\n        {/*<MapView\n          MapSettings={MapSettings}\n          selectedCounty={selectedCounty}\n          setSelectedCounty={setSelectedCounty}\n          time={time}\n          setTime={setTime}\n          week={week}\n          setWeek={setWeek}\n          selectedState={selectedState}\n          setSelectedState={setSelectedState}\n        />*/}\n        <MapView2\n          MapSettings={MapSettings}\n          selectedCounty={selectedCounty}\n          setSelectedCounty={setSelectedCounty}\n          time={time}\n          setTime={setTime}\n          week={week}\n          setWeek={setWeek}\n          selectedState={selectedState}\n          setSelectedState={setSelectedState}\n          width={width}\n        />\n        {/*<MapView1\n          MapSettings={MapSettings}\n          selectedCounty={selectedCounty}\n          setSelectedCounty={setSelectedCounty}\n          time={time}\n          setTime={setTime}\n          week={week}\n          setWeek={setWeek}\n          selectedState={selectedState}\n          setSelectedState={setSelectedState}\n          MapCreator={MapCreator}\n        />*/}\n        {selectedState[0] !== -1 ? (\n          <>\n            <Table selectedState={selectedState} week={week} />\n          </>\n        ) : (\n          <TextContainer>\n            <Text>\n              Click on a state on one of the maps above in order to see\n              individual county values.\n            </Text>\n          </TextContainer>\n        )}\n      </Container>\n    </Page>\n  );\n};\n\nexport default Bivariate;\n"],"sourceRoot":""}