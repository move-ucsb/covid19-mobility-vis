{"version":3,"sources":["webpack://my-gatsby-site/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://my-gatsby-site/./node_modules/@babel/runtime/helpers/objectWithoutProperties.js","webpack://my-gatsby-site/./node_modules/@styled-icons/styled-icon/index.esm.js","webpack://my-gatsby-site/./node_modules/@styled-icons/bootstrap/PlayCircleFill/PlayCircleFill.esm.js","webpack://my-gatsby-site/./node_modules/@styled-icons/bootstrap/PauseCircleFill/PauseCircleFill.esm.js","webpack://my-gatsby-site/./node_modules/@styled-icons/boxicons-solid/SkipPreviousCircle/SkipPreviousCircle.esm.js","webpack://my-gatsby-site/./node_modules/@styled-icons/boxicons-solid/SkipNextCircle/SkipNextCircle.esm.js","webpack://my-gatsby-site/./node_modules/@styled-icons/remix-fill/Restart/Restart.esm.js","webpack://my-gatsby-site/./src/components/global/controls.tsx","webpack://my-gatsby-site/./src/contexts/mapsContext.tsx","webpack://my-gatsby-site/./src/components/trivar/cards.tsx","webpack://my-gatsby-site/./src/components/trivar/map.tsx","webpack://my-gatsby-site/./src/components/trivar/mapView.tsx","webpack://my-gatsby-site/./src/components/trivar/mapExample.tsx","webpack://my-gatsby-site/./src/components/trivar/legendDescription.tsx","webpack://my-gatsby-site/./src/pages/interactive.tsx","webpack://my-gatsby-site/./src/utility/mapZoom.ts"],"names":["module","exports","obj","key","value","Object","defineProperty","enumerable","configurable","writable","__esModule","objectWithoutPropertiesLoose","source","excluded","i","target","getOwnPropertySymbols","sourceSymbolKeys","length","indexOf","prototype","propertyIsEnumerable","call","ownKeys","object","enumerableOnly","keys","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","filterSVGProps","props","reduce","p","k","StyledIconBaseBase","ref","children","iconAttrs","iconViewBox","iconVerticalAlign","size","title","otherProps","iconProps","arguments","forEach","getOwnPropertyDescriptors","defineProperties","_objectSpread","viewBox","height","undefined","width","focusable","role","svgProps","StyledIconBase","withConfig","displayName","componentId","PlayCircleFill","d","PauseCircleFill","SkipPreviousCircle","SkipNextCircle","Restart","fill","ButtonArea","styled","week","setWeek","playing","setPlaying","max","min","onClick","MapsContext","createContext","Maps","states","topojson","countiesMap","features","counties","Provider","Container","Title","Text","Row","Card","hcount","ccount","hrecent","crecent","MapContainer","county","border","getStateFips","fips","Number","String","slice","MapSettings","highlightedState","highlightedCounty","addState","stateSelector","countySelector","data","time","colorScales","hotScale","coldScale","getRadius","translate","scale","d3Container","useRef","projection","d3","map_path","useContext","useEffect","map_g","current","attr","append","MapZoom","style","selectAll","enter","id","objects","geometries","val","properties","name","on","county_path","datum","centroid","sparse","recent","hot","cold","event","this","getAttribute","_","Divider","TextContainerArea","TextContainer","MapControls","Button","LegendContainer","Legend","Cards","MapView","selectedCounty","setSelectedCounty","selectedState","setSelectedState","setTime","LisaContext","mapData","mapTitles","useState","Array","mapZoom","setMapZoom","zoomScale","setZoomScale","reset","zooming","m","currId","select","domain","Sparse","count","n","Math","countContainer","maxHeight","maxWidth","margin","pointData","x","r","remove","xAxis","range","yAxis","ticks","tickFormat","text","recentContainer","weekValues","map","w","c","mapNum","Map","steps","container","transition","duration","step","floor","ControlsContainer","ListMapContainer","StepList","LegendDescription","setLegendStep","clicked","setClicked","setStep","timer","setInterval","clearInterval","legendStep","selectedPage","to","path","g","active","_d","bounds","x0","y0","x1","y1","dx","dy","y","scaleNew","translateNew","stateId","node","classed"],"mappings":"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","file":"component---src-pages-interactive-tsx-a846985e53a35751a475.js","sourcesContent":["function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var objectWithoutPropertiesLoose = require(\"./objectWithoutPropertiesLoose.js\");\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutProperties;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","import _extends from \"@babel/runtime/helpers/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nimport * as React from 'react';\nimport styled from 'styled-components';\nimport validProp from '@emotion/is-prop-valid';\n\nfunction isValidProp(key) {\n  return validProp(key);\n}\n\nfunction filterSVGProps(props) {\n  return Object.keys(props).reduce(function (p, k) {\n    if (isValidProp(k)) {\n      // hack to satisfy TypeScript complexity\n      ;\n      p[k] = props[k];\n    }\n\n    return p;\n  }, {});\n}\n\nvar StyledIconBaseBase = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var children = props.children,\n      iconAttrs = props.iconAttrs,\n      iconVerticalAlign = props.iconVerticalAlign,\n      iconViewBox = props.iconViewBox,\n      size = props.size,\n      title = props.title,\n      otherProps = _objectWithoutProperties(props, [\"children\", \"iconAttrs\", \"iconVerticalAlign\", \"iconViewBox\", \"size\", \"title\"]);\n\n  var iconProps = _objectSpread({\n    viewBox: iconViewBox,\n    height: props.height !== undefined ? props.height : size,\n    width: props.width !== undefined ? props.width : size,\n    'aria-hidden': title == null ? 'true' : undefined,\n    focusable: 'false',\n    role: title != null ? 'img' : undefined\n  }, iconAttrs);\n\n  var svgProps = filterSVGProps(otherProps);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({}, iconProps, svgProps, {\n    ref: ref\n  }), title && /*#__PURE__*/React.createElement(\"title\", {\n    key: \"icon-title\"\n  }, title), children);\n});\nexport var StyledIconBase = /*#__PURE__*/styled(StyledIconBaseBase).withConfig({\n  displayName: \"StyledIconBase\",\n  componentId: \"ea9ulj-0\"\n})([\"display:inline-block;vertical-align:\", \";overflow:hidden;\"], function (props) {\n  return props.iconVerticalAlign;\n});","import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { StyledIconBase } from '@styled-icons/styled-icon';\nexport var PlayCircleFill = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"currentColor\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\"\n  };\n  return /*#__PURE__*/React.createElement(StyledIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 16 16\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.79 5.093A.5.5 0 0 0 6 5.5v5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5z\"\n  }));\n});\nPlayCircleFill.displayName = 'PlayCircleFill';\nexport var PlayCircleFillDimensions = {\n  height: 16,\n  width: 16\n};","import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { StyledIconBase } from '@styled-icons/styled-icon';\nexport var PauseCircleFill = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"currentColor\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\"\n  };\n  return /*#__PURE__*/React.createElement(StyledIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 16 16\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM6.25 5C5.56 5 5 5.56 5 6.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C7.5 5.56 6.94 5 6.25 5zm3.5 0c-.69 0-1.25.56-1.25 1.25v3.5a1.25 1.25 0 1 0 2.5 0v-3.5C11 5.56 10.44 5 9.75 5z\"\n  }));\n});\nPauseCircleFill.displayName = 'PauseCircleFill';\nexport var PauseCircleFillDimensions = {\n  height: 16,\n  width: 16\n};","import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { StyledIconBase } from '@styled-icons/styled-icon';\nexport var SkipPreviousCircle = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"currentColor\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\"\n  };\n  return /*#__PURE__*/React.createElement(StyledIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 24 24\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10c5.515 0 10-4.486 10-10S17.515 2 12 2zm4 14l-6-4v4H8V8h2v4l6-4v8z\"\n  }));\n});\nSkipPreviousCircle.displayName = 'SkipPreviousCircle';\nexport var SkipPreviousCircleDimensions = {\n  height: 24,\n  width: 24\n};","import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { StyledIconBase } from '@styled-icons/styled-icon';\nexport var SkipNextCircle = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"currentColor\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\"\n  };\n  return /*#__PURE__*/React.createElement(StyledIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 24 24\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm4 14h-2v-4l-6 4V8l6 4V8h2v8z\"\n  }));\n});\nSkipNextCircle.displayName = 'SkipNextCircle';\nexport var SkipNextCircleDimensions = {\n  height: 24,\n  width: 24\n};","import _extends from \"@babel/runtime/helpers/extends\";\nimport * as React from 'react';\nimport { StyledIconBase } from '@styled-icons/styled-icon';\nexport var Restart = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var attrs = {\n    \"fill\": \"currentColor\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\"\n  };\n  return /*#__PURE__*/React.createElement(StyledIconBase, _extends({\n    iconAttrs: attrs,\n    iconVerticalAlign: \"middle\",\n    iconViewBox: \"0 0 24 24\"\n  }, props, {\n    ref: ref\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"none\",\n    d: \"M0 0h24v24H0z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm4.82-4.924a7 7 0 10-1.852 1.266l-.975-1.755A5 5 0 1117 12h-3l2.82 5.076z\"\n  }));\n});\nRestart.displayName = 'Restart';\nexport var RestartDimensions = {\n  height: 24,\n  width: 24\n};","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport { PlayCircleFill } from \"@styled-icons/bootstrap/PlayCircleFill\";\nimport { PauseCircleFill } from \"@styled-icons/bootstrap/PauseCircleFill\";\nimport { SkipPreviousCircle } from \"@styled-icons/boxicons-solid/SkipPreviousCircle\";\nimport { SkipNextCircle } from \"@styled-icons/boxicons-solid/SkipNextCircle\";\nimport { Restart } from \"@styled-icons/remix-fill/Restart\";\n\nconst ButtonArea = styled.div`\n  display: flex;\n  width: 100%;\n  justify-content: center;\n\n  * {\n    margin: 5px 10px;\n  }\n\n  & > *:hover {\n    cursor: pointer;\n  }\n`;\n\ntype Props = {\n  week: number;\n  setWeek: (number) => void;\n  playing: boolean;\n  setPlaying: (b: boolean) => void;\n  max: number;\n  min: number\n};\n\nconst Controls = ({ week, setWeek, playing, setPlaying, max, min=0 }: Props) => {\n  return (\n    <ButtonArea>\n      {/* LEFT BUTTON */}\n      <SkipPreviousCircle\n        size=\"30px\"\n        onClick={() => {\n          if (week > min) {\n            setWeek(week - 1);\n          }\n          setPlaying(false);\n        }}\n      />\n\n      {/* MIDDLE BUTTON */}\n      {week === max ? (\n        <Restart\n          size=\"30px\"\n          onClick={() => {\n            setWeek(min);\n            setPlaying(false);\n          }}\n        />\n      ) : playing ? (\n        <PauseCircleFill\n          size=\"30px\"\n          onClick={() => {\n            setPlaying(false);\n          }}\n        />\n      ) : (\n        <PlayCircleFill\n          size=\"30px\"\n          onClick={() => {\n            setPlaying(true);\n          }}\n        />\n      )}\n      \n      {/* RIGHT BUTTON */}\n      <SkipNextCircle\n        size=\"30px\"\n        onClick={() => {\n          if (week < max) {\n            setWeek(week + 1);\n          }\n          setPlaying(false);\n        }}\n      />\n    </ButtonArea>\n  );\n};\n\nexport default Controls;\n","import React, { createContext } from \"react\";\n\nimport * as d3 from \"d3\";\nimport * as topojson from \"topojson\";\n\nimport countiesMap from \"us-atlas/counties-10m.json\";\n\nexport const MapsContext = createContext(null);\n\nexport const Maps = ({ children }) => {\n\n  const states = topojson.feature(countiesMap, countiesMap.objects.states).features\n  const counties = topojson.feature(countiesMap, countiesMap.objects.counties).features\n\n  return (\n    <MapsContext.Provider value={{ states, counties }}>\n      {children}\n    </MapsContext.Provider>\n  );\n};\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  border-radius: 10px;\n  background-color: lightgray;\n  width: 160px;\n  margin: 5px;\n  padding: 5px;\n`;\n\nconst Title = styled.h3`\n  margin: 0 0 10px 0;\n`;\n\nconst Text = styled.p`\n  margin: 0;\n`;\n\nconst Row = styled.div`\n  display: flex;\n  justify-content: space-between;\n`;\n\ntype Props = {\n  title: string;\n  hcount: number;\n  ccount: number;\n  hrecent: number;\n  crecent: number;\n};\n \nexport default function Card({\n  title,\n  hcount,\n  ccount,\n  hrecent,\n  crecent,\n}: Props) {\n  return (\n    <Container>\n      <Title>{title}</Title>\n      <Row>\n        <Text># Hot Spots:</Text> <Text>{hcount}</Text>\n      </Row>\n      <Row>\n        <Text># Cold Spots:</Text><Text>{ccount}</Text>\n      </Row>\n      <Row>\n        <Text>Last Hot Spot:</Text><Text>{hrecent}</Text>\n      </Row>\n      <Row>\n        <Text>Last Cold Spot:</Text><Text>{crecent}</Text>\n      </Row>\n    </Container>\n  );\n}\n","import React, { useRef, useEffect, useState, useContext } from \"react\";\nimport styled from \"styled-components\";\n\nimport * as d3 from \"d3\";\nimport * as topojson from \"topojson\";\n\nimport { MapsContext } from \"../../contexts/mapsContext\";\nimport MapZoom from \"../../utility/mapZoom\";\nimport Sparse from \"../../utility/sparse\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  flex-direction: column;\n  align-items: center;\n  margin: 10px 20px;\n\n  @media (max-width: 830px) {\n    margin: 10px 5px;\n  }\n  @media (max-width: 700px) {\n    margin: 0;\n  }\n`;\nconst Title = styled.h3`\n  margin: 0;\n`;\n\nconst MapContainer = styled.svg<{ county: number, border: boolean }>`\n  g {\n    background-color: light-gray;\n    fill: red;\n  }\n\n  /* use can use an attribute selector but idk how to select on all maps */\n  #c${({ county }) => county}.cboundary {\n    stroke: black;\n    stroke-width: 0.25px;\n  }\n\n  .cboundary {\n    stroke-width: 0px;\n    fill: #ffffff00;\n  }\n\n  .bubble {\n    stroke-width: 0;\n  }\n\n  /*\n  * > path:hover, circle:hover {\n    cursor: pointer;\n  }\n  */\n\n  border: 1px solid\n    ${({ border }) => (border ? \"black\" : \"white\")};\n`;\n\nconst getStateFips = (fips: number): number => {\n  return Number(String(fips).slice(0, -3));\n};\n\ntype MapSettings = {\n  width: number;\n  height: number;\n  translate: [number, number];\n  scale: number;\n};\n\ntype Data = Array<Sparse>;\n\ninterface Props {\n  title: string;\n  MapSettings: MapSettings;\n  countiesMap: any;\n  highlightedState: [number, string];\n  highlightedCounty: [number, string];\n  addState: (m: MapZoom) => void;\n  stateSelector: ([s, s1]: [number, string], b?: boolean) => boolean;\n  countySelector: ([s, s1]: [number, string]) => void;\n  data: Data;\n  time: [number, number];\n  colorScales: [any, any];\n  getRadius: (g: Sparse) => number;\n}\n\nconst Map = ({\n  title,\n  MapSettings,\n  countiesMap,\n  highlightedState,\n  highlightedCounty,\n  addState,\n  stateSelector,\n  countySelector,\n  data,\n  time,\n  colorScales: [hotScale, coldScale],\n  getRadius,\n}: Props) => {\n  const { width, height, translate, scale } = MapSettings;\n\n  const d3Container = useRef(null);\n\n  const projection = d3.geoAlbers().scale(scale).translate(translate);\n  const map_path = d3.geoPath().projection(projection);\n\n  const { counties, states } = useContext(MapsContext);\n\n  useEffect(() => {\n    const map_g = d3\n      .select(d3Container.current)\n      .attr(\"width\", width)\n      .attr(\"height\", height)\n      .append(\"g\");\n\n    addState(new MapZoom(map_path, map_g, width, height, highlightedState[0]));\n\n    // States:\n    map_g\n      .append(\"g\")\n      .style(\"stroke\", \"black\")\n      .style(\"stroke-width\", \"0.5px\")\n      .style(\"fill\", \"#ffffffff\")\n      .selectAll(\"path\")\n      .data(states)\n      .enter()\n      .append(\"path\")\n      .attr(\"d\", map_path as any)\n      .attr(\"stateFips\", ({ id }) => Number(id));\n\n    // Counties:\n    map_g\n      .append(\"g\")\n      .selectAll(\"path\")\n      .data(counties)\n      .enter()\n      .append(\"path\")\n      .attr(\"d\", map_path as any)\n      .attr(\"stateName\", ({ id }) => {\n        return countiesMap.objects.states.geometries.filter((val) => {\n          return getStateFips(id) === Number(val.id);\n        })[0].properties.name;\n      })\n      .attr(\"id\", ({ id }) => `c${Number(id)}`)\n      //   .attr(\"countyName\", ({ properties: { name } }) => name)\n      .attr(\"class\", \"cboundary\")\n      .on(\"mouseout\", () => {\n        countySelector([-1, \"\"]);\n      });\n\n    // County Circles:\n    map_g\n      .selectAll(\"circle\")\n      .data(data)\n      .enter()\n      .append(\"circle\")\n      .attr(\"class\", \"bubble\")\n      /* \n        HAVE TO LOAD COUNTY AND STATE NAME TO BUBBLES HERE:\n          MAYBE PUT THOSE AS SPARSE VECTOR INFO\n      */\n      .attr(\"countyName\", ({ fips }) => {\n        return countiesMap.objects.counties.geometries.filter(({ id }) => {\n          return fips === Number(id);\n        })[0].properties.name;\n      })\n      .attr(\"stateName\", ({ fips }) => {\n        return countiesMap.objects.states.geometries.filter(({ id }) => {\n          return getStateFips(fips) === Number(id);\n        })[0].properties.name;\n      })\n      .attr(\"transform\", ({ fips }) => {\n        const county_path = d3.select(`#c${fips}`).datum();\n        return `translate(${map_path.centroid(county_path)})`;\n      })\n      .on(\"mouseout\", () => {\n        countySelector([-1, \"\"]);\n      });\n  }, []);\n\n  useEffect(() => {\n    d3.select(d3Container.current)\n      .selectAll(\".bubble\")\n      .attr(\"r\", getRadius)\n      .style(\"fill\", (sparse) => {\n        const [hot, cold] = sparse.recent(...time);\n        return hot > cold ? hotScale(hot) : coldScale(cold);\n      });\n  }, [time]);\n\n  useEffect(() => {\n    d3.select(d3Container.current)\n      .selectAll(\".cboundary\")\n      .on(\"click\", function (event, { id }) {\n        stateSelector([getStateFips(id), this.getAttribute(\"stateName\")]);\n      });\n\n    d3.select(d3Container.current)\n      .selectAll(\".cboundary\")\n      .on(\"mouseover\", function (event, { id, properties: { name } }) {\n        if (highlightedState[1] !== \"\") {\n          countySelector([Number(id), name]);\n        }\n      });\n\n    d3.select(d3Container.current)\n      .selectAll(\".bubble\")\n      .on(\"mouseover\", function (_, { fips }) {\n        if (!highlightedState) {\n          return;\n        }\n        // console.log(getStateFips(d.fips), highlightedState[0])\n        if (highlightedState[1] !== \"\") {\n          countySelector([fips, this.getAttribute(\"countyName\")]);\n        }\n      })\n      .on(\"click\", function (event, { fips }) {\n        stateSelector([getStateFips(fips), this.getAttribute(\"stateName\")]);\n      })\n      .style(\"fill-opacity\", ({ fips }) => {\n        return highlightedState[0] === -1 ||\n          getStateFips(fips) === highlightedState[0]\n          ? 1\n          : 0.2;\n      });\n  }, [highlightedState]);\n\n  \n\n  return (\n    <Container>\n      <Title>{title}</Title>\n      <MapContainer\n        ref={d3Container}\n        county={highlightedCounty[0]}\n        border={highlightedState[0] !== -1}\n      />\n    </Container>\n  );\n};\n\nexport default Map;\n","import React, { useRef, useEffect, useState, useContext } from \"react\";\nimport styled from \"styled-components\";\n\nimport * as d3 from \"d3\";\n\n//import us from \"us-atlas/nation-10m.json\"\nimport counties from \"us-atlas/counties-10m.json\";\nimport states from \"us-atlas/states-10m.json\";\n//import data from \"../data/counties.json\";\n\nimport MapZoom from \"../../utility/mapZoom\";\nimport Sparse from \"../../utility/sparse\";\nimport Card from \"./cards\";\nimport Map from \"./map\";\nimport { LisaContext } from \"../../contexts/lisaContext\";\n\nimport { Maps } from \"../../contexts/mapsContext\";\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n`;\nconst Divider = styled.hr`\n  width: 98%;\n  height: 1px;\n  background-color: black;\n  border-radius: 1px;\n  margin: 5px 10px;\n`;\n\nconst TextContainerArea = styled.div`\n  width: 100%;\n`;\n\nconst TextContainer = styled.div`\n  margin: 0 15px;\n  display: flex;\n  justify-content: space-between;\n\n  @media (max-width: 500px) {\n    flex-wrap: wrap;\n    justify-content: center;\n  }\n`;\n\nconst MapControls = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n`;\n\nconst MapContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n\n  width: 100%;\n  flex-wrap: wrap;\n\n  @media (max-width: 770px) {\n    flex-wrap: wrap;\n  }\n`;\n\nconst Button = styled.button`\n  border-radius: 10px;\n  height: 30px;\n  width: 60px;\n`;\n\nconst Row = styled.div`\n  display: flex;\n  justify-content: center;\n\n  width: 100%;\n  flex-wrap: wrap;\n`;\n\nconst Text = styled.p`\n  margin: 0;\n  width: 100%;\n`;\n\nconst Title = styled.h3`\n  margin: 0;\n  white-space: nowrap;\n`;\n\nconst LegendContainer = styled.div`\n  display: flex;\n  width: 85%;\n  justify-content: space-between;\n  @media (max-width: 770px) {\n    width: 100%;\n    justify-content: center;\n    flex-wrap: wrap;\n  }\n\n  font-size: 16pt;\n`;\n\nconst Legend = styled.div`\n  margin: 10px 0;\n  width: 380px;\n  display: flex;\n  justify-content: center;\n  align-itms: center;\n`;\n\nconst Cards = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n  flex-wrap: wrap;\n`;\n\ntype MapSettings = {\n  width: number;\n  height: number;\n  translate: [number, number];\n  scale: number;\n};\n\ntype Data = Array<Sparse>;\n\ntype Props = {\n  MapSettings: MapSettings;\n  selectedCounty: [number, string];\n  setSelectedCounty: ([s1, s2]: [number, string]) => void;\n  selectedState: [number, string];\n  setSelectedState: ([s1, s2]: [number, string]) => void;\n  time: [number, number];\n  setTime: ([n1, n2]: [number, number]) => void;\n};\n\nconst getStateFips = (fips: number): number => {\n  return Number(String(fips).slice(0, -3));\n};\n\nexport default function MapView({\n  MapSettings,\n  selectedCounty,\n  setSelectedCounty,\n  selectedState,\n  setSelectedState,\n  time,\n  setTime,\n}: Props) {\n  const { mapData, mapTitles } = useContext(LisaContext);\n\n  const [mapZoom, setMapZoom] = useState(Array<MapZoom>(mapTitles.length));\n\n  const addState = (m: MapZoom, mapNum: number) => {\n    mapZoom[mapNum] = m;\n    setMapZoom(mapZoom);\n  };\n\n  const [zoomScale, setZoomScale] = useState(1);\n\n  const stateSelector = (\n    [id, name]: [number, string],\n    reset: boolean = false\n  ) => {\n    let zooming: boolean;\n\n    mapZoom.forEach((m) => {\n      if (!reset && id !== m.currId && id !== -1) {\n        setZoomScale(m.select(id));\n        zooming = true;\n      } else {\n        m.reset();\n        setZoomScale(1);\n        zooming = false;\n      }\n    });\n\n    if (zooming) {\n      setSelectedState([id, name]);\n      return true;\n    } else {\n      setSelectedState([-1, \"\"]);\n      return false;\n    }\n  };\n\n  const countySelector = ([id, name]: [number, string]) => {\n    if (id === -1 || getStateFips(id) === selectedState[0]) {\n      setSelectedCounty([id, name]);\n    }\n  };\n\n  const coldScale = d3\n    .scaleSequentialPow(d3.interpolateBlues)\n    .domain([...time]);\n  const hotScale = d3.scaleSequentialPow(d3.interpolateReds).domain([...time]);\n\n  const getRadius = (d: Sparse | number) => {\n    const val = d instanceof Sparse ? d.count(...time) : [d];\n    const n = d instanceof Sparse ? d.n : time[1];\n    return (30 + Math.max(...val)) / n;\n  };\n\n  const countContainer = useRef(null);\n\n  const maxHeight = 100;\n  const maxWidth = 370;\n  const margin = [20, 20];\n\n  useEffect(() => {\n    const width = Math.min(maxWidth, 100 + zoomScale * 10) - 2 * margin[0];\n    const height = Math.min(maxHeight, 40 + zoomScale * 2);\n\n    const pointData = [\n      { x: 1, r: 1 },\n      { x: 2, r: 5 },\n      { x: 3, r: 10 },\n      { x: 4, r: 20 },\n      { x: 5, r: 52 },\n    ];\n\n    d3.select(countContainer.current).selectAll(\"*\").remove();\n\n    const map_g = d3\n      .select(countContainer.current)\n      .style(\"width\", width + (7 / 2) * margin[0])\n      .style(\"height\", height + 2 * margin[1])\n      .append(\"g\")\n      .attr(\"transform\", `translate(${margin[0]},0)`);\n\n    const xAxis = d3\n      .scaleLinear()\n      .domain([1, pointData[pointData.length - 1].x])\n      .range([0, width]);\n    const yAxis = d3.scaleLinear().domain([0, 1]).range([height, 0]);\n\n    map_g\n      .append(\"g\")\n      .attr(\n        \"transform\",\n        `translate(0,${(margin[1] * 3) / 2 + (zoomScale * 5) / 2})`\n      )\n      .call(\n        d3\n          .axisBottom(xAxis)\n          .ticks(5)\n          .tickFormat((i) => String(pointData[i - 1].r))\n      );\n\n    map_g\n      .append(\"g\")\n      .attr(\"transform\", `translate(${margin[0]},0)`)\n      .call(d3.axisLeft(yAxis))\n      .style(\"display\", \"none\");\n\n    map_g\n      .selectAll(\"dot\")\n      .remove()\n      .data(pointData)\n      .enter()\n      .append(\"circle\")\n      .attr(\"class\", \"point\")\n      .attr(\"cx\", ({ x }) => xAxis(x))\n      .attr(\"cy\", () => yAxis(0.5))\n      .attr(\"r\", ({ r }) => getRadius(r) * zoomScale * (selectedState[0] === -1 ? 4 : 1))\n      .style(\"fill\", \"black\");\n\n    map_g\n      .append(\"text\")\n      .attr(\"text-anchor\", \"end\")\n      .attr(\"x\", width / 2 + margin[0] + 10)\n      .attr(\"y\", height + (margin[1] * 3) / 2 + zoomScale / 4)\n      .style(\"font-size\", \"14pt\")\n      .text(\"Count\");\n  }, [time, zoomScale, selectedState]);\n\n  const recentContainer = useRef(null);\n\n  const circleWidth = 40;\n\n  useEffect(() => {\n    d3.select(recentContainer.current).selectAll(\"*\").remove();\n\n    const leftMargin = 30;\n\n    const map_g = d3\n      .select(recentContainer.current)\n      .style(\"width\", maxWidth)\n      .style(\"height\", maxHeight)\n      // .style(\"background-color\", \"lightgray\")\n      .append(\"g\")\n      .attr(\n        \"transform\",\n        `translate(${leftMargin + margin[0] + circleWidth},0)`\n      );\n\n    const weekValues = [1, 5, 10, 15, 20, 25, 30, 40, 46, 52];\n\n    const pointData = [...Array(weekValues.length * 2).keys()].map((i) => {\n      return {\n        x: (i % weekValues.length) + 1,\n        w: weekValues[i % weekValues.length],\n        c: i < weekValues.length ? 1 : 2,\n      };\n    });\n\n    const xAxis = d3\n      .scaleLinear()\n      .domain([1, weekValues.length])\n      .range([0, maxWidth - circleWidth - 2 * margin[0] - leftMargin]);\n    const yAxis = d3\n      .scaleLinear()\n      .domain([0, 3])\n      .range([maxHeight - 2 * margin[1], 0]);\n\n    map_g\n      .append(\"g\")\n      .attr(\"transform\", `translate(0,${margin[1] + (maxHeight * 5) / 12})`)\n      .call(\n        d3\n          .axisBottom(xAxis)\n          .ticks(5)\n          .tickFormat((i) => String(pointData[i - 1].w))\n      );\n\n    map_g\n      .append(\"g\")\n      .attr(\"transform\", `translate(${margin[0]},0)`)\n      .call(d3.axisLeft(yAxis))\n      .style(\"display\", \"none\");\n\n    map_g\n      .selectAll(\"dot\")\n      .remove()\n      .data(pointData)\n      .enter()\n      .append(\"circle\")\n      .attr(\"class\", \"point\")\n      .attr(\"cx\", ({ x }) => xAxis(x))\n      .attr(\"cy\", ({ c }) => yAxis(c))\n      .attr(\"r\", () => 9)\n      .style(\"fill\", ({ c, w }) => (c === 1 ? hotScale(w) : coldScale(w)));\n\n    map_g\n      .append(\"text\")\n      .attr(\"text-anchor\", \"end\")\n      .attr(\"x\", maxWidth / 2 + leftMargin - circleWidth)\n      .attr(\"y\", (maxHeight * 19) / 20)\n      .style(\"font-size\", \"14pt\")\n      .text(\"Week Number\");\n\n    map_g\n      .append(\"text\")\n      .attr(\"text-anchor\", \"end\")\n      .attr(\"x\", -leftMargin / 2)\n      .attr(\"y\", maxHeight / 2 - 5)\n      .text(\"Hotspots\")\n      .style(\"font-size\", \"12pt\");\n\n    map_g\n      .append(\"text\")\n      .attr(\"text-anchor\", \"end\")\n      .attr(\"x\", -leftMargin / 2)\n      .attr(\"y\", maxHeight / 4)\n      .text(\"Coldspots\")\n      .style(\"font-size\", \"12pt\");\n  }, [time, zoomScale]);\n\n  // useEffect(() => {\n  //   d3\n  //     .select(d3Container.current)\n  //     .selectAll(\".point\")\n  //     .attr(\"r\", ({ r }) => getRadius(r) * zoomScale)\n  // }, [time, zoomScale])\n\n  return (\n    <Container>\n      <TextContainerArea>\n        <TextContainer>\n          {selectedState[0] !== -1 ? (\n            <>\n              <MapControls>\n                <Title>Selected State: {selectedState[1]}</Title>\n                <Text>\n                  Highlight over a county to read its specific values.\n                </Text>\n              </MapControls>\n              <Button\n                onClick={() => {\n                  stateSelector([-1, \"\"], true);\n                }}\n              >\n                Reset\n              </Button>\n            </>\n          ) : (\n            <Text>\n              Click a state on the map to zoom in and see county specific\n              information.\n            </Text>\n          )}\n        </TextContainer>\n      </TextContainerArea>\n      <Divider />\n      <Maps>\n        <MapContainer>\n          {mapTitles.map((title, i) => {\n            return (\n              <Map\n                key={i}\n                MapSettings={MapSettings}\n                // title={\"(\" + [\"a\", \"b\", \"c\", \"d\"][i] + \") \" + title}\n                title={title}\n                countiesMap={counties}\n                highlightedCounty={selectedCounty}\n                highlightedState={selectedState}\n                addState={(m: MapZoom) => addState(m, i)}\n                stateSelector={stateSelector}\n                countySelector={countySelector}\n                time={time}\n                data={mapData ? mapData[i] : null}\n                colorScales={[hotScale, coldScale]}\n                getRadius={getRadius}\n              />\n            );\n          })}\n        </MapContainer>\n      </Maps>\n      <Row>\n        {selectedCounty[1] ? (\n          <Title>Selected County: {selectedCounty[1]} County</Title>\n        ) : null}\n      </Row>\n      <Cards>\n        {selectedCounty[0] !== -1\n          ? [0, 2, 1, 3].map((i) => {\n              const county = mapData\n                ? mapData[i].filter(\n                    (d) => Number(d.fips) === Number(selectedCounty[0])\n                  )[0]\n                : false;\n\n              const [hcount, ccount] = county ? county.count(...time) : [0, 0];\n              const [hrecent, crecent] = county\n                ? county.recent(...time)\n                : [0, 0];\n\n              return (\n                <Card\n                  key={i}\n                  title={mapTitles[i]}\n                  hcount={hcount}\n                  ccount={ccount}\n                  hrecent={hrecent}\n                  crecent={crecent}\n                />\n              );\n            })\n          : null}\n      </Cards>\n      <LegendContainer>\n        <Legend>\n          <svg ref={recentContainer} />\n        </Legend>\n        <Legend>\n          <svg ref={countContainer} />\n        </Legend>\n      </LegendContainer>\n    </Container>\n  );\n}\n","import React, { useRef, useContext, useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { graphql, useStaticQuery } from \"gatsby\";\n\nimport * as d3 from \"d3\";\n\nimport { MapsContext } from \"../../contexts/mapsContext\";\nimport { LisaContext } from \"../../contexts/lisaContext\";\nimport Sparse from \"../../utility/sparse\";\n\nconst Container = styled.div``;\n\nconst Map = styled.svg`\n  width: 350px;\n  height: 250px;\n`;\n\nconst getRandomX = () => 10 * (Math.random() - 0.5);\nconst getRandomY = () => 50 * (Math.random() - 0.5);\n\nconst width = 280;\nconst height = 250;\n\nconst xAxis = d3.scaleLinear().domain([1, 52]).range([0, 200]);\nconst yAxis = d3\n  .scaleLinear()\n  .domain([0, 2])\n  .range([height / 4, 0]);\n\nconst time = [0, 52];\nconst coldScale = d3.scaleSequentialPow(d3.interpolateBlues).domain([...time]);\nconst hotScale = d3.scaleSequentialPow(d3.interpolateReds).domain([...time]);\n\nconst state1 = (container, map_path) => {\n  d3.select(container.current).select(\"#xaxis\").attr(\"visibility\", \"hidden\");\n  d3.select(container.current)\n    .selectAll(\".cboundary\")\n    .style(\"stroke-opacity\", 1);\n  d3.select(container.current)\n    .selectAll(\".bubble\")\n    .transition()\n    .attr(\"transform\", ({ fips }) => {\n      const county_path = d3.select(`#c${fips}`).datum();\n      return `translate(${map_path.centroid(county_path)})`;\n    })\n    .style(\"fill\", \"#d3d3d3\")\n    .attr(\"r\", 4)\n    .duration(2000);\n\n  d3.select(container.current).select(\"#axistitle\").attr(\"display\", \"none\");\n};\n\nconst state2 = (container, map_path) => {\n  d3.select(container.current).select(\"#xaxis\").attr(\"visibility\", \"hidden\");\n  d3.select(container.current)\n    .selectAll(\".cboundary\")\n    .style(\"stroke-opacity\", 1);\n\n  d3.select(container.current)\n    .selectAll(\".bubble\")\n    .transition()\n    .style(\"fill\", (sparse) => {\n      const [hot, cold] = sparse.recent(...time);\n      return hot > cold ? \"red\" : \"blue\";\n    })\n    .attr(\"r\", 4)\n    .attr(\"transform\", ({ fips }) => {\n      const county_path = d3.select(`#c${fips}`).datum();\n      return `translate(${map_path.centroid(county_path)})`;\n    })\n    .duration(1000);\n  d3.select(container.current).select(\"#axistitle\").attr(\"display\", \"none\");\n};\n\nconst state3 = (container, map_path) => {\n  d3.select(container.current)\n    .selectAll(\".cboundary\")\n    .style(\"stroke-opacity\", 0);\n\n  d3.select(container.current).select(\"#xaxis\").attr(\"visibility\", \"visible\");\n\n  d3.select(container.current)\n    .selectAll(\".bubble\")\n    .transition()\n    .style(\"fill\", (sparse) => {\n      const [hot, cold] = sparse.recent(...time);\n      return hot > cold ? hotScale(hot) : coldScale(cold);\n    })\n    .attr(\"transform\", (d) => {\n      const [hot, cold] = d.recent(...time);\n      return `translate(${xAxis(Math.max(hot, cold)) + width / 5 + 25}, ${\n        yAxis(hot > cold ? 1 : 2) + height / 4\n      })`;\n    })\n    .attr(\"r\", 4)\n    .duration(2000);\n\n  d3.select(container.current).select(\"#axistitle\").attr(\"display\", \"block\");\n};\n\nconst getRadius = (d: Sparse) => {\n  const val = d.count();\n  const n = d.n;\n  return ((10 + Math.max(...val)) / n) * 12;\n};\n\nconst state4 = (container, map_path) => {\n  d3.select(container.current).select(\"#xaxis\").attr(\"visibility\", \"visible\");\n  d3.select(container.current)\n    .selectAll(\".cboundary\")\n    .style(\"stroke-opacity\", 0);\n  d3.select(container.current)\n    .selectAll(\".bubble\")\n    .transition()\n    .style(\"fill\", (sparse) => {\n      const [hot, cold] = sparse.recent(...time);\n      return hot > cold ? hotScale(hot) : coldScale(cold);\n    })\n    .attr(\"r\", getRadius)\n    .attr(\"transform\", (d) => {\n      const [hot, cold] = d.recent(...time);\n      return `translate(${xAxis(hot > cold ? hot : cold) + width / 5 + 25}, ${\n        yAxis(hot > cold ? 1 : 2) + height / 4\n      })`;\n    })\n    .duration(2000);\n  d3.select(container.current).select(\"#axistitle\").attr(\"display\", \"block\");\n};\n\nconst state5 = (container, map_path) => {\n  d3.select(container.current)\n    .selectAll(\".cboundary\")\n    .style(\"stroke-opacity\", 1);\n  d3.select(container.current).select(\"#xaxis\").attr(\"visibility\", \"hidden\");\n  d3.select(container.current)\n    .selectAll(\".bubble\")\n    .transition()\n    .style(\"fill\", (sparse) => {\n      const [hot, cold] = sparse.recent(...time);\n      return hot > cold ? hotScale(hot) : coldScale(cold);\n    })\n    .attr(\"r\", getRadius)\n    .attr(\"transform\", ({ fips }) => {\n      const county_path = d3.select(`#c${fips}`).datum();\n      return `translate(${map_path.centroid(county_path)})`;\n    })\n    .duration(2000);\n  d3.select(container.current).select(\"#axistitle\").attr(\"display\", \"none\");\n};\n\nconst steps = [state1, state2, state3, state4, state5];\n\ntype Props = {\n  step: number;\n};\n\nconst MapExample = ({ step }: Props) => {\n  const translate: [number, number] = [width + 10 + 25, (height * 7) / 4 - 10];\n  const scale = 3000;\n\n  const d3Container = useRef(null);\n\n  const { counties } = useContext(MapsContext);\n  const { mapData, mapTitles } = useContext(LisaContext);\n\n  const data = mapData[3].filter(({ fips }) => Math.floor(fips / 1000) == 46);\n\n  const time = [0, 52];\n\n  const getRadius = (d: Sparse) => {\n    const val = d.count();\n    const n = d.n;\n    return ((10 + Math.max(...val)) / n) * 12;\n  };\n\n  const projection = d3.geoAlbers().scale(scale).translate(translate);\n  const map_path = d3.geoPath().projection(projection);\n\n  useEffect(() => {\n    const map_g = d3\n      .select(d3Container.current)\n      .attr(\"width\", width)\n      .attr(\"height\", height)\n      .append(\"g\");\n    map_g\n      .append(\"g\")\n      .attr(\"transform\", `translate(${width / 5 + 25},${height / 2})`)\n      .attr(\"id\", \"xaxis\")\n      .call(\n        d3\n          .axisBottom(xAxis)\n          //   .ticks(5)\n          .tickFormat((i) => String(i))\n      );\n    // .attr(\"display\", \"none\");\n\n    map_g\n      .append(\"g\")\n      .attr(\"transform\", `translate(${width / 5 + 25},${height / 4})`)\n      .call(d3.axisLeft(yAxis))\n      .attr(\"display\", \"none\");\n\n    map_g\n      .append(\"g\")\n      .append(\"text\")\n      .attr(\"id\", \"axistitle\")\n      .attr(\"text-anchor\", \"middle\")\n      .attr(\"x\", xAxis(26) + width / 5 + 25)\n      .attr(\"y\", yAxis(-3.25))\n      .text(\"Week Number\")\n      .attr(\"display\", \"none\");\n    // Counties:\n    map_g\n      .append(\"g\")\n      .selectAll(\"path\")\n      .data(counties.filter(({ id }) => Math.floor(id / 1000) == 46))\n      .enter()\n      .append(\"path\")\n      .attr(\"d\", map_path as any)\n      .attr(\"id\", ({ id }) => `c${Number(id)}`)\n      //   .attr(\"countyName\", ({ properties: { name } }) => name)\n      .attr(\"class\", \"cboundary\")\n      // .style(\"stroke-width\", 0)\n      .style(\"stroke\", \"#D3D3D3\")\n      .style(\"fill\", \"#FFFFFF00\");\n\n    map_g\n      .selectAll(\"circle\")\n      .data(data)\n      .enter()\n      .append(\"circle\")\n      .attr(\"class\", \"bubble\")\n      .attr(\"transform\", ({ fips }) => {\n        const county_path = d3.select(`#c${fips}`).datum();\n        return `translate(${map_path.centroid(county_path)})`;\n      });\n  }, []);\n\n  useEffect(() => {\n    steps[step - 1](d3Container, map_path);\n  }, [step]);\n\n  return (\n    <Container>\n      <Map ref={d3Container} />\n    </Container>\n  );\n};\n\nexport default MapExample;\n","import React, { useState, useEffect } from \"react\";\nimport styled from \"styled-components\";\n\nimport MapExample from \"./mapExample\";\nimport Controls from \"../global/controls\";\n\nimport { Maps } from \"../../contexts/mapsContext\";\nimport { LisaData } from \"../../contexts/lisaContext\";\n\nconst Container = styled.div`\n  width: 100%;\n`;\n\nconst TextContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n\n  & > h1 {\n    margin: 10px 15px 0 15px;\n  }\n\n  & > h2 {\n    margin: 5px 15px 0 15px;\n  }\n\n  margin: 5px 0;\n`;\n\nconst Divider = styled.hr`\n  width: 98%;\n  height: 1px;\n  background-color: black;\n  border-radius: 1px;\n  margin: 5px 10px;\n`;\n\nconst Text = styled.p`\n  margin: 0 15px;\n`;\n\nconst ControlsContainer = styled.div`\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n`;\n\nconst ListMapContainer = styled.div`\n  display: flex;\n  width: 100%;\n\n  @media (max-width: 770px) {\n    flex-wrap: wrap;\n    justify-content: center;\n  }\n\n  margin-bottom: 5px;\n`;\n\nconst Button = styled.button``;\n\nconst StepList = styled.ol<{ step: number }>`\n  max-width: 500px;\n  @media (max-width: 550px) {\n    width: 85%;\n  }\n  li:nth-child(${({ step }) => step}) {\n    background-color: #d3d3d3;\n  }\n\n  & > * {\n    margin: 2px 0;\n    padding: 3px;\n    cursor: pointer;\n  }\n`;\n\ntype Props = {\n  step: number;\n  setLegendStep: (i: number) => void;\n};\n\nexport default function LegendDescription({ step, setLegendStep }: Props) {\n  const [playing, setPlaying] = useState(false);\n  const [clicked, setClicked] = useState(false);\n\n  const setStep = (step) => {\n    setClicked(true);\n    setLegendStep(step);\n  };\n\n  useEffect(() => {\n    if (!playing) {\n      return;\n    }\n    setStep(step);\n    const timer = setInterval(() => {\n      if (step < 5) {\n        setStep(step + 1);\n      }\n    }, 4000);\n    return () => clearInterval(timer);\n  }, [playing, step]);\n\n  return (\n    <Maps>\n      <LisaData>\n        <Container>\n          <ListMapContainer>\n            <TextContainer>\n              <Text>\n                The following list describes the steps that were taken to make\n                the bubble plots on this page. An accompanying map of South\n                Dakota using Safegraph % sheltered is provided to show these\n                steps.\n              </Text>\n              <StepList step={clicked ? step : 0}>\n                <li\n                  onClick={() => {\n                    setPlaying(false);\n                    setStep(1);\n                  }}\n                >\n                  Counties with significant values have circles placed over\n                  their centroids.\n                </li>\n                <li\n                  onClick={() => {\n                    setPlaying(false);\n                    setStep(2);\n                  }}\n                >\n                  Counties are classified as hotspots (red) or coldspots (blue).\n                </li>\n                <li\n                  onClick={() => {\n                    setPlaying(false);\n                    setStep(3);\n                  }}\n                >\n                  The color intensity of circles is determined by the last week\n                  the county was a significant value.\n                </li>\n                <li\n                  onClick={() => {\n                    setPlaying(false);\n                    setStep(4);\n                  }}\n                >\n                  The size of the circles are determined by the total number of\n                  weeks a county was a significant value in 2020.\n                </li>\n                <li\n                  onClick={() => {\n                    setPlaying(false);\n                    setStep(5);\n                  }}\n                >\n                  The circles are placed back over the county.\n                </li>\n              </StepList>\n              <Text>\n                Use the controls under the map to play through these steps. You\n                can also click on the text of steps to display them.\n              </Text>\n            </TextContainer>\n            <ControlsContainer>\n              <MapExample step={step} />\n              <Controls\n                week={step}\n                setWeek={setStep}\n                min={1}\n                max={5}\n                setPlaying={setPlaying}\n                playing={playing}\n              />\n            </ControlsContainer>\n          </ListMapContainer>\n        </Container>\n      </LisaData>\n    </Maps>\n  );\n}\n","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { Link } from \"gatsby\";\n\nimport MapView from \"../components/trivar/mapView\";\nimport Page from \"../components/page\";\nimport LegendDescription from \"../components/trivar/legendDescription\";\n\nconst Container = styled.div`\n  width: 100%;\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n`;\n\nconst TextContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: start;\n  width: 100%;\n\n  & > h1 {\n    margin: 10px 15px 0 15px;\n  }\n\n  & > h2 {\n    margin: 5px 15px 0 15px;\n  }\n`;\nconst Divider = styled.hr`\n  width: 98%;\n  height: 1px;\n  background-color: black;\n  border-radius: 1px;\n  margin: 5px 10px;\n`;\nconst Text = styled.p`\n  margin: 5px 15px;\n`;\nconst Trivariate = () => {\n  const width = 380;\n  const height = 250;\n  const mapsTranslate: [number, number] = [width / 2 - 5, height / 2];\n  const mapsScale = 500;\n\n  const MapSettings = {\n    width: width - 10,\n    height,\n    translate: mapsTranslate,\n    scale: mapsScale,\n  };\n\n  const [selectedCounty, setSelectedCounty] = useState<[number, string]>([\n    -1,\n    \"\",\n  ]);\n\n  const [selectedState, setSelectedState] = useState<[number, string]>([\n    -1,\n    \"\",\n  ]);\n\n  const [time, setTime] = useState<[number, number]>([0, 52]);\n\n  const [legendStep, setLegendStep] = useState(1);\n\n  return (\n    <Page selectedPage=\"Interactive\">\n      <Container>\n        <TextContainer>\n          <h1>Clustering Recency & Consistency</h1>\n          <Text>\n            This page provides a single view representation of the{\" \"}\n            <Link to=\"/animated\">Animated Choropleth Maps</Link>. Counties that\n            were either a hotspot or coldspot at least once in 2020 have a\n            circle over them. If the circle is colored blue then the county was\n            a coldspot at some point in time and if it is colored red it was a\n            hotspot. The radius of the circle shows the total number of times\n            that county was a hotspot or coldspot in the given period. A circle\n            with a larger radius indicates that it was a hotspot or coldspot\n            more times in the year. A darker color shows the last time the\n            county was a hotspot or coldspot was later in the year while a\n            lighter color means the last time the county was a hotspot or\n            coldspot was earlier in the year.\n          </Text>\n        </TextContainer>\n        <LegendDescription step={legendStep} setLegendStep={setLegendStep} />\n        <Divider />\n        <MapView\n          MapSettings={MapSettings}\n          selectedCounty={selectedCounty}\n          setSelectedCounty={setSelectedCounty}\n          selectedState={selectedState}\n          setSelectedState={setSelectedState}\n          time={time}\n          setTime={setTime}\n        />\n        <Divider />\n        <TextContainer>\n          <Text>\n            In general, we see more circles in the eastern parts of the US\n            because of the smaller county size compared to counties in western\n            states. We also see different patterns across the different data\n            sources in each column.\n          </Text>\n          <Text>\n            In the left column, showing mobility, Cuebiq shows a cluster of\n            hotspots (high mobility) in the south. These counties are recent\n            (dark red color) and also consistent (larger circle radius).\n            Mississippi in particular contains multiple counties that were\n            hotspots every week in the US. This pattern is not as prevalent in\n            the Safegraph data, though the Safegraph data shows a cluster of\n            coldspots in New England that the Cuebiq map does not.\n          </Text>\n          <Text>\n            The plots showing measures of sheltering in the right column are\n            much more similar to each other than the plots in the left column.\n            However, we still see variation in terms of the recency and\n            consistency of cluster classifications. For example, clicking on\n            Iowa will show counties that area classified as hotspots in the\n            Safegraph data but are classified as coldspots in the Cuebiq data.\n            There is still variation in the counties classified as coldspots in\n            both sources. Generally, the counties in the Safegraph data are less\n            recent (lighter shades of blue) and also less consistent (smaller\n            radius).\n          </Text>\n        </TextContainer>\n      </Container>\n    </Page>\n  );\n};\n\nexport default Trivariate;\n","import * as d3 from \"d3\"\n\nexport default class MapZoom {\n    active = d3.select(null);\n    path = null\n    g = null\n    width = 0\n    height = 0\n    currId = -1\n\n    constructor(path, g, width, height, id) {\n        this.path = path\n        this.g = g;\n        this.width = width\n        this.height = height\n        this.currId = id\n    }\n\n    /*\n        Zoom in from id\n    */\n    select(id: number) {\n        this.currId = id;\n\n        const clicked = this.g.select(`[stateFips='${id}']`);\n\n        // // this.active.classed(\"active\", false);\n        // // this.active = clicked.classed(\"active\", true);\n\n        let d;\n        clicked.attr('x', (_d, i) => {\n            d = _d\n        })\n\n        const [[x0, y0], [x1, y1]] = this.path.bounds(d);\n\n        const dx = x1 - x0;\n        const dy = y1 - y0;\n        const x = (x0 + x1) / 2;\n        const y = (y0 + y1) / 2;\n\n        // const box = d.node().getBBox()\n\n        // const dx = box.width\n        // const dy = box.height\n        // const x = box.x + box.width / 2\n        // const y = box.y + box.height / 2\n\n        // console.log(x, y, dx, dy)\n\n        const scaleNew = 0.8 / Math.max(dx / this.width, dy / this.height);\n        const translateNew = [this.width / 2 - scaleNew * x, this.height / 2 - scaleNew * y]\n\n        this.g\n            .transition()\n            .duration(650)\n            .attr(\"transform\", `translate(${translateNew}) scale(${scaleNew})`)\n\n        return scaleNew\n    }\n\n    /*\n        On click event handler,\n\n\n        not used, WON'T WORK ANYMORE\n    */\n    clicked(clicked, d) {\n        const stateId = clicked.getAttribute(\"id\")\n        // const states = d3.selectAll(`[id='${stateId}']`)\n\n        if (this.active.node() === clicked) {\n            return this.reset();\n        }\n\n        this.active.classed(\"active\", false);\n        this.active = d3.select(clicked).classed(\"active\", true);\n\n        const [[x0, y0], [x1, y1]] = this.path.bounds(d);\n\n        const dx = x1 - x0;\n        const dy = y1 - y0;\n        const x = (x0 + x1) / 2;\n        const y = (y0 + y1) / 2;\n\n        const scaleNew = 0.7 / Math.max(dx / this.width, dy / this.height);\n        const translateNew = [this.width / 2 - scaleNew * x, this.height / 2 - scaleNew * y]\n\n        this.g\n            .transition()\n            .duration(650)\n            .attr(\"transform\", `translate(${translateNew}) scale(${scaleNew})`)\n\n        return stateId\n    }\n\n    /*\n        Reset map view\n    */\n    reset() {\n        this.currId = \"\"\n        this.active.classed(\"active\", false);\n        this.active = d3.select(null);\n\n        this.g\n            .transition()\n            .duration(500)\n            .attr(\"transform\", `translate(0)`)\n    }\n}"],"sourceRoot":""}